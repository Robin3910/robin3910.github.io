<!DOCTYPE html>
<html lang="ch">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="theme-color" content=#58b77a>
  <title>ROBIN-3910</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="author" content="rob_æ›¾æ´›é•”">
  <meta name="keywords" content="">
  <meta name="description" content="robçš„ä¸ªäººåšå®¢ç½‘ç«™ï¼Œè®°å½•ç¼–ç /å­¦ä¹ /ç”Ÿæ´»æ—¥å¸¸">
  <script id="hexo-configurations">
  var CONFIG = {
    root: '/',
    theme: 'lx',
    version: '0.3.9',
    localsearch: {
      "enable": 'false',
      "trigger": "auto",
      "top_n_per_article": "1",
      "unescape": 'false',
      "preload": 'false'
    },
    path: '-'
  };
</script>

  <link rel="shortcut icon" href="/favicon.ico">
  <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/theme-lx@0.3.9/source/css/main.min.css">
  <style type="text/css">
    pre,
    code {
      font-family: 'Fira Code', monospace;
    }
    html {
      font-family: sans-serif;
    }
    body {
      font-family: sans-serif;
    }
    h1, h2, h3, h4, h5, figure {
      font-family: sans-serif;
    }
    .menu-container{
      font-family: sans-serif;
    }
  </style>

  <script src="//cdn.jsdelivr.net/npm/jquery@3.4.1/dist/jquery.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/theme-lx@0.3.9/source/js/jquery.jside.menu.js"></script>
	<script>
	$(document).ready(function(){
	$(".menu-container").jSideMenu({
	    jSidePosition: "position-right",
	    jSideSticky: true,
	    jSideSkin: "greenish",
	     });
	}); 
	</script>
  
  <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Fira Code:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">
  <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/font-awesome@4/css/font-awesome.min.css">
<meta name="generator" content="Hexo 5.4.0"></head>
<body>
<div id="page">

<div id="lx-aside" style="background-image: url(//cdn.jsdelivr.net/npm/theme-lx@0.3.9/source/images/cover.jpeg)">
  <div class="overlay">
  <div class="featured">
    <div class="avatar"><a href="/"><img style="width: 100px;height: 100px;" src="/images/avatar.jpeg"></a></div>
    <span>rob_æ›¾æ´›é•”</span>
    <h1>ROBIN-3910</h1>
    <span>ä»Šå¤©å¤§åˆ€ğŸ—¡æ²¡å¸¦è¿‡æ¥ï¼Œå°±ä¸ç ä½ éœ€æ±‚äº†</span>
    <div class="social-links">
    <a href="https://github.com/Robin3910" target="_blank"><i class="fa fa-github fa-fw"></i></a>
    <a href="robin3910@163.com" target="_blank"><i class="fa fa-envelope fa-fw"></i></a>
</div>
  </div>
  </div>
</div>

<div id="lx-main-content">
  <div class="lx-post"> 

  <div class="lx-entry padding">
    <div>
      <h2 class="title"><a href="/2021/05/10/avlTree/">AVLæ ‘TSå®ç°</a></h2>
      <span class="lx-post-detail"><i class="fa fa-calendar-o"></i> 2021-05-10</span>
      <p><h2 id="å®šä¹‰"><a href="#å®šä¹‰" class="headerlink" title="å®šä¹‰"></a>å®šä¹‰</h2><p>AVLæ ‘ä¹Ÿç§°ä¸ºå¹³è¡¡äºŒå‰æ ‘ï¼ŒAVL æ ‘å¾—åäºå®ƒçš„å‘æ˜è€…Â G. M. Adelson-VelskyÂ å’ŒÂ Evgenii Landisï¼Œä»–ä»¬åœ¨1962å¹´çš„è®ºæ–‡ã€ŠAn algorithm for the organization of informationã€‹ä¸­å…¬å¼€äº†è¿™ä¸€æ•°æ®ç»“æ„ã€‚</p>
<p>AVLæ˜¯ä¸€ç§ç‰¹æ®Šçš„äºŒå‰æœç´¢æ ‘ï¼Œå…·å¤‡äºŒå‰æœç´¢æ ‘çš„æ‰€æœ‰ç‰¹ç‚¹ï¼Œä¸”ä»»ä½•ä¸€ä¸ªç»“ç‚¹çš„å·¦å­æ ‘ä¸å³å­æ ‘éƒ½æ˜¯å¹³è¡¡äºŒå‰æ ‘ï¼Œå¹¶ä¸”é«˜åº¦ä¹‹å·®çš„ç»å¯¹å€¼ä¸è¶…è¿‡ 1ï¼ˆæ­¤é«˜åº¦å·®ä¹Ÿç§°ä¸ºå¹³è¡¡å› å­balance factorï¼‰ã€‚</p>
<h2 id="ä¸ºä½•éœ€è¦æœ‰å¹³è¡¡äºŒå‰æœç´¢æ ‘"><a href="#ä¸ºä½•éœ€è¦æœ‰å¹³è¡¡äºŒå‰æœç´¢æ ‘" class="headerlink" title="ä¸ºä½•éœ€è¦æœ‰å¹³è¡¡äºŒå‰æœç´¢æ ‘"></a>ä¸ºä½•éœ€è¦æœ‰å¹³è¡¡äºŒå‰æœç´¢æ ‘</h2><p>äºŒå‰æœç´¢æ ‘ä¸€å®šç¨‹åº¦ä¸Šå¯ä»¥æé«˜æœç´¢æ•ˆç‡ï¼Œä½†æ˜¯å½“åŸåºåˆ—æœ‰åºæ—¶ï¼Œä¾‹å¦‚åºåˆ— A = {1ï¼Œ2ï¼Œ3ï¼Œ4ï¼Œ5ï¼Œ6}ï¼Œ</p>
<p>æ„é€ äºŒå‰æœç´¢æ ‘å¦‚ä¸‹å›¾æ—¶ ï¼Œä¾æ®æ­¤åºåˆ—æ„é€ çš„äºŒå‰æœç´¢æ ‘ä¸ºå³æ–œæ ‘ï¼ŒåŒæ—¶äºŒå‰æ ‘é€€åŒ–æˆå•é“¾è¡¨ï¼Œæœç´¢æ•ˆç‡é™ä½ä¸º O(n)ã€‚</p>
<img src="/images/avl/1.jpeg" width = "500" alt="1" align=center />

<p>åœ¨ä¸Šè¿°çš„äºŒå‰æœç´¢æ ‘ä¸­æŸ¥æ‰¾å…ƒç´  6 éœ€è¦æŸ¥æ‰¾ 6 æ¬¡ã€‚</p>
<p>äºŒå‰æœç´¢æ ‘çš„æŸ¥æ‰¾æ•ˆç‡å–å†³äºæ ‘çš„é«˜åº¦ï¼Œå› æ­¤ä¿æŒæ ‘çš„é«˜åº¦æœ€å°ï¼Œå³å¯ä¿è¯æ ‘çš„æŸ¥æ‰¾æ•ˆç‡ã€‚</p>
<p>åŒæ ·çš„åºåˆ— Aï¼Œå°†å…¶æ”¹ä¸ºä¸‹å›¾çš„æ–¹å¼å­˜å‚¨ï¼ŒæŸ¥æ‰¾å…ƒç´  6 æ—¶åªéœ€æ¯”è¾ƒ 3 æ¬¡ï¼ŒæŸ¥æ‰¾æ•ˆç‡æå‡ä¸€å€ã€‚</p>
<img src="/images/avl/2.jpeg" width = "500" alt="1" align=center />



<h2 id="å…·ä½“æ¥å£"><a href="#å…·ä½“æ¥å£" class="headerlink" title="å…·ä½“æ¥å£"></a>å…·ä½“æ¥å£</h2><ul>
<li>å¾€æ ‘ä¸­æ’å…¥(insert)ä¸€ä¸ªç»“ç‚¹ï¼›</li>
<li>åˆ é™¤(remove)æ ‘ä¸­å·²ç»å­˜åœ¨çš„æŸä¸ªç»“ç‚¹ï¼›</li>
<li>æœç´¢(search)æ ‘ä¸­æŸä¸ªç»“ç‚¹ï¼›</li>
</ul>
<h2 id="è¾…åŠ©å‡½æ•°"><a href="#è¾…åŠ©å‡½æ•°" class="headerlink" title="è¾…åŠ©å‡½æ•°"></a>è¾…åŠ©å‡½æ•°</h2><ul>
<li>è·å–èŠ‚ç‚¹é«˜åº¦æ–¹æ³•ï¼štreeHeightï¼›</li>
<li>è·å–æœ€å¤§/æœ€å°èŠ‚ç‚¹æ–¹æ³•ï¼šgetMax/getMinï¼›</li>
<li>åˆ¤æ–­æŸä¸ªèŠ‚ç‚¹æ˜¯å¦å¹³è¡¡æ–¹æ³•ï¼šgetBalanceFactorï¼›</li>
</ul>
<h2 id="å¹³è¡¡æ“ä½œ"><a href="#å¹³è¡¡æ“ä½œ" class="headerlink" title="å¹³è¡¡æ“ä½œ"></a>å¹³è¡¡æ“ä½œ</h2><p>ç›¸è¾ƒäºBSTï¼ŒAVLå¤šäº†ä¸€æ­¥å¹³è¡¡æ“ä½œï¼Œå³åœ¨æ’å…¥æˆ–è€…åˆ é™¤èŠ‚ç‚¹æ—¶ï¼Œå¯¹æ ‘ä¸­ä¸å¹³è¡¡çš„åœ°æ–¹è¿›è¡Œé‡æ–°å¹³è¡¡ï¼Œè¿™æ˜¯AVLæ ‘çš„ç²¾é«“ï¼Œä½†ä¹Ÿæ˜¯å®ç°çš„éš¾ç‚¹æ‰€åœ¨ã€‚</p>
<p>å¯¹èŠ‚ç‚¹è¿›è¡Œå¹³è¡¡ä¹‹å‰ï¼Œéœ€è¦åˆ¤æ–­å½“å‰èŠ‚ç‚¹æ˜¯å¦å¹³è¡¡ï¼Œé€šè¿‡è®¡ç®—èŠ‚ç‚¹ä¸­å·¦å³å­æ ‘çš„é«˜åº¦å·®æ¥åˆ¤æ–­æ˜¯å¦å¹³è¡¡ï¼Œå¦‚æœé«˜åº¦å·®ç»å¯¹å€¼è¶…è¿‡1ï¼Œåˆ™å½“å‰èŠ‚ç‚¹å¤±è¡¡ï¼Œéœ€è¦å¯¹å…¶è¿›è¡Œå¹³è¡¡æ“ä½œã€‚</p>
<p>å¹³è¡¡æ“ä½œåˆ†ä¸ºå·¦æ—‹å’Œå³æ—‹ï¼š</p>
<img src="/images/avl/3.png" width = "500" alt="1" align=center />

<p>å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œå·¦å›¾ä¸ºå¯¹yèŠ‚ç‚¹è¿›è¡Œå³æ—‹æ“ä½œï¼Œæœ‰å›¾ä¸ºå¯¹xèŠ‚ç‚¹è¿›è¡Œå·¦æ—‹æ“ä½œï¼Œå€ŸåŠ©è¿™å¼ å›¾ç‰‡ï¼Œå¯ä»¥å†™å‡ºå·¦æ—‹å³æ—‹çš„ä»£ç ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">    *  å¯¹èŠ‚ç‚¹yè¿›è¡Œå‘å³æ—‹è½¬æ“ä½œï¼Œè¿”å›æ—‹è½¬åæ–°çš„æ ¹èŠ‚ç‚¹x</span></span><br><span class="line"><span class="comment">    *        y                              x</span></span><br><span class="line"><span class="comment">    *       / \                           /   \</span></span><br><span class="line"><span class="comment">    *      x   T4     å‘å³æ—‹è½¬ (y)        z     y</span></span><br><span class="line"><span class="comment">    *     / \       - - - - - - - -&gt;    / \   / \</span></span><br><span class="line"><span class="comment">    *    z   T3                       T1  T2 T3 T4</span></span><br><span class="line"><span class="comment">    *   / \</span></span><br><span class="line"><span class="comment">    * T1   T2</span></span><br><span class="line"><span class="comment">    * */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">rightRotate</span>(<span class="params">node</span>) </span>&#123;</span><br><span class="line">       <span class="keyword">if</span> (!node) <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">       <span class="keyword">const</span> leftNode = node.left;</span><br><span class="line">       node.left = leftNode.right;</span><br><span class="line">       leftNode.right = node;</span><br><span class="line">       <span class="keyword">return</span> leftNode;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="comment">/**</span></span><br><span class="line"><span class="comment">    * å¯¹èŠ‚ç‚¹yè¿›è¡Œå‘å·¦æ—‹è½¬æ“ä½œï¼Œè¿”å›æ—‹è½¬åæ–°çš„æ ¹èŠ‚ç‚¹x</span></span><br><span class="line"><span class="comment">    *    y                             x</span></span><br><span class="line"><span class="comment">    *  /  \                          /   \</span></span><br><span class="line"><span class="comment">    * T1   x      å‘å·¦æ—‹è½¬ (y)       y     z</span></span><br><span class="line"><span class="comment">    *     / \   - - - - - - - -&gt;   / \   / \</span></span><br><span class="line"><span class="comment">    *   T2  z                     T1 T2 T3 T4</span></span><br><span class="line"><span class="comment">    *      / \</span></span><br><span class="line"><span class="comment">    *     T3 T4</span></span><br><span class="line"><span class="comment">    * */</span></span><br><span class="line">   <span class="function"><span class="keyword">function</span> <span class="title">leftRotate</span>(<span class="params">node</span>) </span>&#123;</span><br><span class="line">       <span class="keyword">if</span> (!node) <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">       <span class="keyword">const</span> rightNode = node.right;</span><br><span class="line">       node.right = rightNode.left;</span><br><span class="line">       rightNode.left = node;</span><br><span class="line">       <span class="keyword">return</span> rightNode;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>

<p>ä¸Šè¿°ï¼Œæ˜¯åŸç†æ€§çš„æ“ä½œã€‚åœ¨çœŸå®çš„æƒ…å†µä¸‹ï¼Œä¼šé‡åˆ°å››ç§å¯èƒ½å‡ºç°çš„æƒ…å†µï¼š</p>
<p><strong>case1ï¼šLLæƒ…å†µï¼ˆå·¦å·¦æƒ…å†µï¼‰</strong></p>
<img src="/images/avl/4.png" width = "500" alt="1" align=center />

<p>ä¸Šè¿°æƒ…å†µï¼Œåªéœ€å¯¹zèŠ‚ç‚¹è¿›è¡Œå³æ—‹æ“ä½œå³å¯</p>
<p><strong>case2ï¼šLRæƒ…å†µï¼ˆå·¦å³æƒ…å†µï¼‰</strong></p>
<img src="/images/avl/5.png" width = "500" alt="1" align=center />


<p>ä¸Šè¿°æƒ…å†µï¼Œéœ€è¦å¯¹YèŠ‚ç‚¹è¿›è¡Œå·¦æ—‹ï¼Œå†å¯¹ZèŠ‚ç‚¹è¿›è¡Œå³æ—‹</p>
<p><strong>case3ï¼šRLæƒ…å†µï¼ˆå³å·¦æƒ…å†µï¼‰</strong></p>
<img src="/images/avl/6.png" width = "500" alt="1" align=center />


<p>ä¸Šè¿°æƒ…å†µï¼Œéœ€è¦å¯¹YèŠ‚ç‚¹è¿›è¡Œå³æ—‹ï¼Œå†å¯¹ZèŠ‚ç‚¹è¿›è¡Œå·¦æ—‹</p>
<p><strong>case4ï¼šRRæƒ…å†µï¼ˆå³å³æƒ…å†µï¼‰</strong></p>
<img src="/images/avl/7.png" width = "500" alt="1" align=center />


<p>ä¸Šè¿°æƒ…å†µï¼Œåªéœ€å¯¹zèŠ‚ç‚¹è¿›è¡Œå·¦æ—‹æ“ä½œå³å¯ã€‚</p>
<p>TSå…·ä½“å®ç°</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/***</span></span><br><span class="line"><span class="comment"> * AVLæ ‘æ¥å£</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">interface</span> AVLTreeImpl &#123;</span><br><span class="line">    <span class="attr">insert</span>: <span class="function">(<span class="params">value: <span class="built_in">number</span></span>) =&gt;</span> <span class="built_in">void</span>;</span><br><span class="line">    remove: <span class="function">(<span class="params">target: <span class="built_in">number</span></span>) =&gt;</span> <span class="built_in">void</span>;</span><br><span class="line">    search: <span class="function">(<span class="params">target: <span class="built_in">number</span></span>) =&gt;</span> TreeNode | <span class="literal">null</span>;</span><br><span class="line">    getRoot: <span class="function">() =&gt;</span> TreeNode;</span><br><span class="line">    getMin: <span class="function">(<span class="params">node: TreeNode</span>) =&gt;</span> TreeNode;</span><br><span class="line">    getMax: <span class="function">(<span class="params">node: TreeNode</span>) =&gt;</span> TreeNode;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ ‘èŠ‚ç‚¹</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TreeNode</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> value: <span class="built_in">number</span>;</span><br><span class="line">    <span class="keyword">public</span> left: TreeNode | <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">public</span> right: TreeNode | <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="title">constructor</span>(<span class="params">value</span>)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.value = value;</span><br><span class="line">        <span class="built_in">this</span>.left = <span class="literal">null</span>;</span><br><span class="line">        <span class="built_in">this</span>.right = <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * AVLæ ‘</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AVLTree</span> <span class="title">implements</span> <span class="title">AVLTreeImpl</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> root: TreeNode | <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="title">constructor</span>(<span class="params">value: <span class="built_in">number</span></span>)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.root = <span class="keyword">new</span> TreeNode(value);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å‰åºéå†</span></span><br><span class="line"><span class="comment">     * */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> PRE_ORDER_TRAVERSE(node: TreeNode): <span class="built_in">void</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (!node) <span class="keyword">return</span>;</span><br><span class="line">        <span class="built_in">console</span>.log(node.value);</span><br><span class="line">        <span class="built_in">this</span>.PRE_ORDER_TRAVERSE(node.left);</span><br><span class="line">        <span class="built_in">this</span>.PRE_ORDER_TRAVERSE(node.right);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ä¸­åºéå†</span></span><br><span class="line"><span class="comment">     * */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> IN_ORDER_TRAVERSE(node: TreeNode): <span class="built_in">void</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (!node) <span class="keyword">return</span>;</span><br><span class="line">        <span class="built_in">this</span>.IN_ORDER_TRAVERSE(node.left);</span><br><span class="line">        <span class="built_in">console</span>.log(node);</span><br><span class="line">        <span class="built_in">this</span>.IN_ORDER_TRAVERSE(node.right);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ååºéå†</span></span><br><span class="line"><span class="comment">     * */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> POST_ORDER_TRAVERSE(node: TreeNode): <span class="built_in">void</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (!node) <span class="keyword">return</span>;</span><br><span class="line">        <span class="built_in">this</span>.POST_ORDER_TRAVERSE(node.left);</span><br><span class="line">        <span class="built_in">this</span>.POST_ORDER_TRAVERSE(node.right);</span><br><span class="line">        <span class="built_in">console</span>.log(node.value);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è·å–èŠ‚ç‚¹é«˜åº¦</span></span><br><span class="line"><span class="comment">     * é€’å½’å®ç°</span></span><br><span class="line"><span class="comment">     * */</span></span><br><span class="line">    <span class="keyword">public</span> treeHeight(node: TreeNode): <span class="built_in">number</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (!node) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">Math</span>.max(<span class="built_in">this</span>.treeHeight(node.left), <span class="built_in">this</span>.treeHeight(node.right)) + <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è·å–èŠ‚ç‚¹å¹³è¡¡å› å­</span></span><br><span class="line"><span class="comment">     * */</span></span><br><span class="line">    <span class="keyword">public</span> getBalanceFactor(node: TreeNode): <span class="built_in">number</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (!node) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.treeHeight(node.left) - <span class="built_in">this</span>.treeHeight(node.right);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     *  å¯¹èŠ‚ç‚¹yè¿›è¡Œå‘å³æ—‹è½¬æ“ä½œï¼Œè¿”å›æ—‹è½¬åæ–°çš„æ ¹èŠ‚ç‚¹x</span></span><br><span class="line"><span class="comment">     *        y                              x</span></span><br><span class="line"><span class="comment">     *       / \                           /   \</span></span><br><span class="line"><span class="comment">     *      x   T4     å‘å³æ—‹è½¬ (y)        z     y</span></span><br><span class="line"><span class="comment">     *     / \       - - - - - - - -&gt;    / \   / \</span></span><br><span class="line"><span class="comment">     *    z   T3                       T1  T2 T3 T4</span></span><br><span class="line"><span class="comment">     *   / \</span></span><br><span class="line"><span class="comment">     * T1   T2</span></span><br><span class="line"><span class="comment">     * */</span></span><br><span class="line">    <span class="keyword">public</span> rightRotate(node: TreeNode): TreeNode &#123;</span><br><span class="line">        <span class="keyword">if</span> (!node) <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">const</span> leftNode = node.left;</span><br><span class="line">        node.left = leftNode.right;</span><br><span class="line">        leftNode.right = node;</span><br><span class="line">        <span class="keyword">return</span> leftNode;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å¯¹èŠ‚ç‚¹yè¿›è¡Œå‘å·¦æ—‹è½¬æ“ä½œï¼Œè¿”å›æ—‹è½¬åæ–°çš„æ ¹èŠ‚ç‚¹x</span></span><br><span class="line"><span class="comment">     *    y                             x</span></span><br><span class="line"><span class="comment">     *  /  \                          /   \</span></span><br><span class="line"><span class="comment">     * T1   x      å‘å·¦æ—‹è½¬ (y)       y     z</span></span><br><span class="line"><span class="comment">     *     / \   - - - - - - - -&gt;   / \   / \</span></span><br><span class="line"><span class="comment">     *   T2  z                     T1 T2 T3 T4</span></span><br><span class="line"><span class="comment">     *      / \</span></span><br><span class="line"><span class="comment">     *     T3 T4</span></span><br><span class="line"><span class="comment">     * */</span></span><br><span class="line">    <span class="keyword">public</span> leftRotate(node: TreeNode): TreeNode &#123;</span><br><span class="line">        <span class="keyword">if</span> (!node) <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">const</span> rightNode = node.right;</span><br><span class="line">        node.right = rightNode.left;</span><br><span class="line">        rightNode.left = node;</span><br><span class="line">        <span class="keyword">return</span> rightNode;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å¹³è¡¡èŠ‚ç‚¹</span></span><br><span class="line"><span class="comment">     * */</span></span><br><span class="line">    <span class="keyword">public</span> reBalance(node: TreeNode): TreeNode &#123;</span><br><span class="line">        <span class="keyword">if</span> (!node) <span class="keyword">return</span> node;</span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">this</span>.getBalanceFactor(node) &gt; <span class="number">1</span> &amp;&amp; <span class="built_in">this</span>.getBalanceFactor(node.left) &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="comment">/**</span></span><br><span class="line"><span class="comment">             * case1ï¼šLLæƒ…å†µï¼Œç›´æ¥å³æ—‹</span></span><br><span class="line"><span class="comment">             * å¯¹èŠ‚ç‚¹yè¿›è¡Œå‘å³æ—‹è½¬æ“ä½œï¼Œè¿”å›æ—‹è½¬åæ–°çš„æ ¹èŠ‚ç‚¹x</span></span><br><span class="line"><span class="comment">             *        y                              x</span></span><br><span class="line"><span class="comment">             *       / \                           /   \</span></span><br><span class="line"><span class="comment">             *      x   T4     å‘å³æ—‹è½¬ (y)        z     y</span></span><br><span class="line"><span class="comment">             *     / \       - - - - - - - -&gt;    / \   / \</span></span><br><span class="line"><span class="comment">             *    z   T3                       T1  T2 T3 T4</span></span><br><span class="line"><span class="comment">             *   / \</span></span><br><span class="line"><span class="comment">             * T1   T2</span></span><br><span class="line"><span class="comment">             * */</span></span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">this</span>.rightRotate(node);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="built_in">this</span>.getBalanceFactor(node) &gt; <span class="number">1</span> &amp;&amp; <span class="built_in">this</span>.getBalanceFactor(node.left) &lt;= <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="comment">/**</span></span><br><span class="line"><span class="comment">             * case2ï¼šLRæƒ…å†µï¼Œå…ˆå¯¹å·¦å­æ ‘èŠ‚ç‚¹è¿›è¡Œå·¦æ—‹ï¼Œå†å¯¹èŠ‚ç‚¹è¿›è¡Œå³æ—‹</span></span><br><span class="line"><span class="comment">             * å¯¹èŠ‚ç‚¹xè¿›è¡Œå‘å·¦æ—‹è½¬æ“ä½œï¼Œå†å¯¹yèŠ‚ç‚¹è¿›è¡Œå³æ—‹æ“ä½œ</span></span><br><span class="line"><span class="comment">             *        y                              y                             T3</span></span><br><span class="line"><span class="comment">             *       / \                           /  \                           /   \</span></span><br><span class="line"><span class="comment">             *      x   T4     å‘å·¦æ—‹è½¬ (x)        T3   T4       å‘å³æ—‹è½¬ (y)       x     y</span></span><br><span class="line"><span class="comment">             *     / \       - - - - - - - -&gt;    / \         - - - - - - - -&gt;   / \   / \</span></span><br><span class="line"><span class="comment">             *    z   T3                        x  T2                          z  T1 T2  T4</span></span><br><span class="line"><span class="comment">             *       / \                       / \</span></span><br><span class="line"><span class="comment">             *     T1   T2                    z  T1</span></span><br><span class="line"><span class="comment">             * */</span></span><br><span class="line">            node.left = <span class="built_in">this</span>.leftRotate(node.left);</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">this</span>.rightRotate(node);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="built_in">this</span>.getBalanceFactor(node) &lt; -<span class="number">1</span> &amp;&amp; <span class="built_in">this</span>.getBalanceFactor(node.right) &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="comment">/**</span></span><br><span class="line"><span class="comment">             * case3ï¼šRLæƒ…å†µï¼Œå…ˆå¯¹å³å­æ ‘èŠ‚ç‚¹è¿›è¡Œå³æ—‹ï¼Œå†å¯¹èŠ‚ç‚¹è¿›è¡Œå·¦æ—‹</span></span><br><span class="line"><span class="comment">             * å¯¹èŠ‚ç‚¹T4è¿›è¡Œå‘å³æ—‹è½¬æ“ä½œï¼Œå†å¯¹yèŠ‚ç‚¹è¿›è¡Œå·¦æ—‹æ“ä½œ</span></span><br><span class="line"><span class="comment">             *        y                                   y                                     z</span></span><br><span class="line"><span class="comment">             *       / \                                /  \                                  /   \</span></span><br><span class="line"><span class="comment">             *      x   T4          å‘å³æ—‹è½¬ (T4)       x    z            å‘å·¦æ—‹è½¬ (y)          y     T4</span></span><br><span class="line"><span class="comment">             *         / \       - - - - - - - -&gt;         / \         - - - - - - - -&gt;      / \   / \</span></span><br><span class="line"><span class="comment">             *       z   T3                              T1  T4                            x  T1 T2  T3</span></span><br><span class="line"><span class="comment">             *      / \                                     / \</span></span><br><span class="line"><span class="comment">             *    T1   T2                                 T2  T3</span></span><br><span class="line"><span class="comment">             * */</span></span><br><span class="line">            node.right = <span class="built_in">this</span>.rightRotate(node.right);</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">this</span>.leftRotate(node);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="built_in">this</span>.getBalanceFactor(node) &lt; -<span class="number">1</span> &amp;&amp; <span class="built_in">this</span>.getBalanceFactor(node.right) &lt;= <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="comment">/**</span></span><br><span class="line"><span class="comment">             * case4ï¼šRRæƒ…å†µï¼Œç›´æ¥å·¦æ—‹</span></span><br><span class="line"><span class="comment">             * å¯¹èŠ‚ç‚¹yè¿›è¡Œå‘å·¦æ—‹è½¬æ“ä½œï¼Œè¿”å›æ—‹è½¬åæ–°çš„æ ¹èŠ‚ç‚¹x</span></span><br><span class="line"><span class="comment">             *    y                             x</span></span><br><span class="line"><span class="comment">             *  /  \                          /   \</span></span><br><span class="line"><span class="comment">             * T1   x      å‘å·¦æ—‹è½¬ (y)       y     z</span></span><br><span class="line"><span class="comment">             *     / \   - - - - - - - -&gt;   / \   / \</span></span><br><span class="line"><span class="comment">             *   T2  z                     T1 T2 T3 T4</span></span><br><span class="line"><span class="comment">             *      / \</span></span><br><span class="line"><span class="comment">             *     T3 T4</span></span><br><span class="line"><span class="comment">             * */</span></span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">this</span>.leftRotate(node);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> node;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ’å…¥èŠ‚ç‚¹</span></span><br><span class="line"><span class="comment">     * */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="title">insert</span>(<span class="params">value</span>)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.root = <span class="built_in">this</span>.insertNode(<span class="built_in">this</span>.root, value);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ’å…¥èŠ‚ç‚¹è¾…åŠ©å‡½æ•°ï¼Œåˆ©ç”¨é€’å½’å®ç°</span></span><br><span class="line"><span class="comment">     * */</span></span><br><span class="line">    <span class="keyword">private</span> insertNode(root: TreeNode, <span class="attr">value</span>: <span class="built_in">number</span>): TreeNode &#123;</span><br><span class="line">        <span class="keyword">if</span> (root.value &lt; value) &#123;</span><br><span class="line">            <span class="keyword">if</span> (!root.right) &#123;</span><br><span class="line">                root.right = <span class="keyword">new</span> TreeNode(value);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="comment">// è¿™æ­¥é€’å½’æ˜¯å…³é”®ï¼Œéå¸¸å·§å¦™ï¼ŒinsertNodeæ–¹æ³•ä¼šå°†æ²¿é€”çš„èŠ‚ç‚¹é‡æ–°å¹³è¡¡</span></span><br><span class="line">                <span class="comment">// å¹³è¡¡åï¼Œå°èŒƒå›´å­æ ‘çš„æ ¹èŠ‚ç‚¹å¯èƒ½å°±ä¼šå‘ç”Ÿå˜åŒ–ï¼Œä¼šå¤±å»ä¸çˆ¶èŠ‚ç‚¹çš„è¿æ¥å…³ç³»</span></span><br><span class="line">                <span class="comment">// è€Œé‡æ–°å°†å…¶èµ‹å€¼ç»™root.rightçˆ¶èŠ‚ç‚¹ä¹‹åï¼Œåˆèƒ½é‡æ–°å»ºç«‹è”ç³»</span></span><br><span class="line">                root.right = <span class="built_in">this</span>.insertNode(root.right, value);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (root.value &gt; value) &#123;</span><br><span class="line">            <span class="keyword">if</span> (!root.left) &#123;</span><br><span class="line">                root.left = <span class="keyword">new</span> TreeNode(value);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                root.left = <span class="built_in">this</span>.insertNode(root.left, value);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// åœ¨å¶å­èŠ‚ç‚¹ä¸­æ’å…¥æ–°çš„èŠ‚ç‚¹åï¼Œä¼šæ²¿ç»è¿‡è·¯å¾„é‡æ–°å¹³è¡¡æ•´æ£µæ ‘</span></span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.reBalance(root);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æŸ¥æ‰¾èŠ‚ç‚¹</span></span><br><span class="line"><span class="comment">     * */</span></span><br><span class="line">    <span class="keyword">public</span> search(target: <span class="built_in">number</span>): TreeNode &#123;</span><br><span class="line">        <span class="keyword">let</span> node = <span class="built_in">this</span>.root;</span><br><span class="line">        <span class="keyword">while</span> (node) &#123;</span><br><span class="line">            <span class="keyword">if</span> (target &lt; node.value) &#123;</span><br><span class="line">                node = node.left;</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (target &gt; node.value) &#123;</span><br><span class="line">                node = node.right;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">return</span> node;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è·å–æ ¹èŠ‚ç‚¹</span></span><br><span class="line"><span class="comment">     * */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="title">getRoot</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.root;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åˆ é™¤èŠ‚ç‚¹</span></span><br><span class="line"><span class="comment">     * */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="title">remove</span>(<span class="params">value: <span class="built_in">number</span></span>)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.root = <span class="built_in">this</span>.removeNode(<span class="built_in">this</span>.root, value);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åˆ é™¤èŠ‚ç‚¹è¾…åŠ©å‡½æ•°</span></span><br><span class="line"><span class="comment">     * */</span></span><br><span class="line">    <span class="keyword">private</span> removeNode(node: TreeNode, <span class="attr">target</span>: <span class="built_in">number</span>): TreeNode &#123;</span><br><span class="line">        <span class="keyword">if</span> (target &gt; node.value &amp;&amp; node.right) &#123;</span><br><span class="line">            node.right = <span class="built_in">this</span>.removeNode(node.right, target);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (target &lt; node.value &amp;&amp; node.left) &#123;</span><br><span class="line">            node.left = <span class="built_in">this</span>.removeNode(node.left, target);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span>(target === node.value) &#123;</span><br><span class="line">            <span class="keyword">let</span> curNode = node;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// ç›®æ ‡èŠ‚ç‚¹æ˜¯å¶å­èŠ‚ç‚¹ï¼Œæ— å·¦å³å­èŠ‚ç‚¹ï¼Œç›´æ¥åˆ é™¤</span></span><br><span class="line">            <span class="keyword">if</span> (!curNode.left &amp;&amp; !curNode.right) &#123;</span><br><span class="line">                curNode = <span class="literal">null</span>;</span><br><span class="line">                <span class="keyword">return</span> curNode;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// ç›®æ ‡èŠ‚ç‚¹æœ‰å·¦èŠ‚ç‚¹ï¼Œæ— å³èŠ‚ç‚¹</span></span><br><span class="line">            <span class="keyword">if</span> (curNode.left &amp;&amp; !curNode.right) &#123;</span><br><span class="line">                curNode.value = curNode.left.value;</span><br><span class="line">                curNode.left = <span class="literal">null</span>;</span><br><span class="line">                <span class="keyword">return</span> curNode;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// ç›®æ ‡èŠ‚ç‚¹æœ‰å³èŠ‚ç‚¹ï¼Œæ— å·¦èŠ‚ç‚¹</span></span><br><span class="line">            <span class="keyword">if</span> (!curNode.left &amp;&amp; curNode.right) &#123;</span><br><span class="line">                curNode.value = curNode.right.value;</span><br><span class="line">                curNode.right = <span class="literal">null</span>;</span><br><span class="line">                <span class="keyword">return</span> curNode;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="comment">/**</span></span><br><span class="line"><span class="comment">             * ç›®æ ‡èŠ‚ç‚¹å¤„äºä¸­é—´ä½ç½®ï¼Œå­˜åœ¨å·¦å­èŠ‚ç‚¹ä¹Ÿå­˜åœ¨å³å­èŠ‚ç‚¹</span></span><br><span class="line"><span class="comment">             * å¯ä»¥æœ‰ä»¥ä¸‹ä¸¤ç§å¤„ç†æ–¹å¼ï¼š</span></span><br><span class="line"><span class="comment">             * 1ã€æ‰¾åˆ°å½“å‰è¦åˆ é™¤èŠ‚ç‚¹å·¦å­æ ‘ä¸­æœ€å¤§çš„èŠ‚ç‚¹ä¸è¦åˆ é™¤çš„èŠ‚ç‚¹è¿›è¡Œæ›¿æ¢</span></span><br><span class="line"><span class="comment">             * 2ã€æ‰¾åˆ°å½“å‰è¦åˆ é™¤èŠ‚ç‚¹å³å­æ ‘ä¸­æœ€å°çš„èŠ‚ç‚¹ä¸è¦åˆ é™¤çš„èŠ‚ç‚¹è¿›è¡Œæ›¿æ¢</span></span><br><span class="line"><span class="comment">             *</span></span><br><span class="line"><span class="comment">             * ä»¥ç¬¬ä¸€ç§æ–¹å¼ä¸ºä¾‹:</span></span><br><span class="line"><span class="comment">             * æ‰¾åˆ°å·¦å­æ ‘ä¸­æœ€å¤§çš„èŠ‚ç‚¹sï¼Œå°†sçš„å€¼æ›¿æ¢è¦åˆ é™¤çš„èŠ‚ç‚¹çš„å€¼å¹¶åˆ é™¤èŠ‚ç‚¹s</span></span><br><span class="line"><span class="comment">             */</span></span><br><span class="line">            <span class="keyword">if</span> (curNode.left &amp;&amp; curNode.right) &#123;</span><br><span class="line">                <span class="keyword">let</span> maxNodeOfLeft = <span class="built_in">this</span>.getMax(curNode.left);</span><br><span class="line">                curNode.value = maxNodeOfLeft.value;</span><br><span class="line">                curNode.left = <span class="built_in">this</span>.removeNode(curNode.left, maxNodeOfLeft.value);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.reBalance(node);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è·å–æœ€å°èŠ‚ç‚¹</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> getMin(node: TreeNode): TreeNode &#123;</span><br><span class="line">        <span class="keyword">while</span> (node.left) &#123;</span><br><span class="line">            node = node.left;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> node;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è·å–æœ€å¤§èŠ‚ç‚¹</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> getMax(node: TreeNode): TreeNode &#123;</span><br><span class="line">        <span class="keyword">while</span> (node.right) &#123;</span><br><span class="line">            node = node.right;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> node;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> avl = <span class="keyword">new</span> AVLTree(<span class="number">1</span>);</span><br><span class="line">avl.insert(<span class="number">2</span>);</span><br><span class="line">avl.insert(<span class="number">3</span>);</span><br><span class="line">avl.insert(<span class="number">4</span>);</span><br><span class="line">avl.insert(<span class="number">5</span>);</span><br><span class="line">avl.insert(<span class="number">6</span>);</span><br><span class="line">avl.insert(<span class="number">7</span>);</span><br><span class="line">avl.insert(<span class="number">8</span>);</span><br><span class="line">avl.insert(<span class="number">9</span>);</span><br><span class="line"></span><br><span class="line">avl.remove(<span class="number">6</span>);</span><br><span class="line"></span><br><span class="line">AVLTree.IN_ORDER_TRAVERSE(avl.getRoot());</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
</p>
      <div class="post-button"><a class="btn" href="/2021/05/10/avlTree/" rel="noopener"><i class="fa fa-angle-double-right fa-fw"></i>Read More</a></div>
    </div>
  </div>
  <div class="lx-entry padding">
    <div>
      <h2 class="title"><a href="/2021/05/09/bst/">äºŒå‰æœç´¢æ ‘TSå®ç°</a></h2>
      <span class="lx-post-detail"><i class="fa fa-calendar-o"></i> 2021-05-09</span>
      <p><p>æ•°ç»„çš„æœç´¢æ¯”è¾ƒæ–¹ä¾¿ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ä¸‹æ ‡ï¼Œä½†åˆ é™¤æˆ–è€…æ’å…¥å°±æ¯”è¾ƒéº»çƒ¦äº†ï¼Œè€Œé“¾è¡¨ä¸ä¹‹ç›¸åï¼Œåˆ é™¤å’Œæ’å…¥éƒ½æ¯”è¾ƒç®€å•ï¼Œ ä½†æ˜¯æŸ¥æ‰¾å¾ˆæ…¢ï¼Œè¿™è‡ªç„¶ä¹Ÿä¸è¿™ä¸¤ç§æ•°æ®ç»“æ„çš„å­˜å‚¨æ–¹å¼æœ‰å…³ï¼Œæ•°ç»„æ˜¯å–ä¸€æ®µç›¸è¿çš„ç©ºé—´ï¼Œè€Œé“¾è¡¨æ˜¯æ¯åˆ›å»ºä¸€ä¸ªèŠ‚ç‚¹ä¾¿å–ä¸€ä¸ªèŠ‚ç‚¹æ‰€éœ€çš„ç©ºé—´ï¼Œ<br>åªæ˜¯ä½¿ç”¨æŒ‡é’ˆè¿›è¡Œè¿æ¥ï¼Œç©ºé—´ä¸Šå¹¶ä¸æ˜¯è¿ç»­çš„ã€‚è€ŒäºŒå‰æ ‘å°±æ—¢æœ‰é“¾è¡¨çš„å¥½å¤„ï¼Œåˆæœ‰æ•°ç»„çš„ä¼˜ç‚¹ã€‚ </p>
<h2 id="åº”ç”¨"><a href="#åº”ç”¨" class="headerlink" title="åº”ç”¨"></a>åº”ç”¨</h2><p>äºŒå‰æœç´¢æ ‘ä½œä¸ºä¸€ç§ç»å…¸çš„æ•°æ®ç»“æ„ï¼Œå®ƒæ—¢æœ‰é“¾è¡¨çš„å¿«é€Ÿæ’å…¥ä¸åˆ é™¤æ“ä½œçš„ç‰¹ç‚¹ï¼Œåˆæœ‰æ•°ç»„å¿«é€ŸæŸ¥æ‰¾çš„ä¼˜åŠ¿ï¼›æ‰€ä»¥åº”ç”¨ååˆ†å¹¿æ³›ï¼Œä¾‹å¦‚åœ¨æ–‡ä»¶ç³»ç»Ÿå’Œæ•°æ®åº“ç³»ç»Ÿä¸€èˆ¬ä¼šé‡‡ç”¨è¿™ç§æ•°æ®ç»“æ„è¿›è¡Œé«˜æ•ˆç‡çš„æ’åºä¸æ£€ç´¢æ“ä½œã€‚</p>
<h2 id="ç‰¹ç‚¹"><a href="#ç‰¹ç‚¹" class="headerlink" title="ç‰¹ç‚¹"></a>ç‰¹ç‚¹</h2><p>åœ¨äºŒå‰æœç´¢æ ‘ä¸­ï¼š</p>
<ul>
<li>è‹¥ä»»æ„ç»“ç‚¹çš„å·¦å­æ ‘ä¸ç©ºï¼Œåˆ™å·¦å­æ ‘ä¸Šæ‰€æœ‰ç»“ç‚¹çš„å€¼å‡ä¸å¤§äºå®ƒçš„æ ¹ç»“ç‚¹çš„å€¼ã€‚ </li>
<li>è‹¥ä»»æ„ç»“ç‚¹çš„å³å­æ ‘ä¸ç©ºï¼Œåˆ™å³å­æ ‘ä¸Šæ‰€æœ‰ç»“ç‚¹çš„å€¼å‡ä¸å°äºå®ƒçš„æ ¹ç»“ç‚¹çš„å€¼ã€‚ </li>
<li>ä»»æ„ç»“ç‚¹çš„å·¦ã€å³å­æ ‘ä¹Ÿåˆ†åˆ«ä¸ºäºŒå‰æœç´¢æ ‘ã€‚</li>
</ul>
<h2 id="TSå®ç°"><a href="#TSå®ç°" class="headerlink" title="TSå®ç°"></a>TSå®ç°</h2><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/***</span></span><br><span class="line"><span class="comment"> * äºŒå‰æœç´¢æ ‘æ¥å£</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">interface</span> BinarySearchTreeImpl &#123;</span><br><span class="line">    <span class="attr">insert</span>: <span class="function">(<span class="params">value: <span class="built_in">number</span></span>) =&gt;</span> <span class="built_in">void</span>;</span><br><span class="line">    remove: <span class="function">(<span class="params">target: <span class="built_in">number</span></span>) =&gt;</span> <span class="built_in">void</span>;</span><br><span class="line">    search: <span class="function">(<span class="params">target: <span class="built_in">number</span></span>) =&gt;</span> TreeNode | <span class="literal">null</span>;</span><br><span class="line">    getRoot: <span class="function">() =&gt;</span> TreeNode;</span><br><span class="line">    getMin: <span class="function">() =&gt;</span> TreeNode;</span><br><span class="line">    getMax: <span class="function">() =&gt;</span> TreeNode;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/***</span></span><br><span class="line"><span class="comment"> * æ ‘èŠ‚ç‚¹</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TreeNode</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> value: <span class="built_in">number</span>;</span><br><span class="line">    <span class="keyword">public</span> left: TreeNode | <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">public</span> right: TreeNode | <span class="literal">null</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="title">constructor</span>(<span class="params">value</span>)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.value = value;</span><br><span class="line">        <span class="built_in">this</span>.left = <span class="literal">null</span>;</span><br><span class="line">        <span class="built_in">this</span>.right = <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/***</span></span><br><span class="line"><span class="comment"> * äºŒå‰æœç´¢æ ‘</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BinarySearchTree</span> <span class="title">implements</span> <span class="title">BinarySearchTreeImpl</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">readonly</span> root: TreeNode | <span class="literal">null</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="title">constructor</span>(<span class="params">val</span>)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (!<span class="built_in">this</span>.root) &#123;</span><br><span class="line">            <span class="built_in">this</span>.root = <span class="keyword">new</span> TreeNode(val);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å‰åºéå†</span></span><br><span class="line"><span class="comment">     * */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> PRE_ORDER_TRAVERSE(node: TreeNode): <span class="built_in">void</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (!node) <span class="keyword">return</span>;</span><br><span class="line">        <span class="built_in">console</span>.log(node.value);</span><br><span class="line">        <span class="built_in">this</span>.PRE_ORDER_TRAVERSE(node.left);</span><br><span class="line">        <span class="built_in">this</span>.PRE_ORDER_TRAVERSE(node.right);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ä¸­åºéå†</span></span><br><span class="line"><span class="comment">     * */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> IN_ORDER_TRAVERSE(node: TreeNode): <span class="built_in">void</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (!node) <span class="keyword">return</span>;</span><br><span class="line">        <span class="built_in">this</span>.IN_ORDER_TRAVERSE(node.left);</span><br><span class="line">        <span class="built_in">console</span>.log(node.value);</span><br><span class="line">        <span class="built_in">this</span>.IN_ORDER_TRAVERSE(node.right);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ååºéå†</span></span><br><span class="line"><span class="comment">     * */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> POST_ORDER_TRAVERSE(node: TreeNode): <span class="built_in">void</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (!node) <span class="keyword">return</span>;</span><br><span class="line">        <span class="built_in">this</span>.POST_ORDER_TRAVERSE(node.left);</span><br><span class="line">        <span class="built_in">this</span>.POST_ORDER_TRAVERSE(node.right);</span><br><span class="line">        <span class="built_in">console</span>.log(node.value);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è·å–æ ¹èŠ‚ç‚¹</span></span><br><span class="line"><span class="comment">     * */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="title">getRoot</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.root;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ’å…¥èŠ‚ç‚¹</span></span><br><span class="line"><span class="comment">     * */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="title">insert</span>(<span class="params">value: <span class="built_in">number</span></span>)</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> node = <span class="keyword">new</span> TreeNode(value);</span><br><span class="line">        <span class="keyword">let</span> curNode = <span class="built_in">this</span>.root;</span><br><span class="line">        <span class="keyword">let</span> preNode;</span><br><span class="line">        <span class="comment">// å…ˆæ‰¾åˆ°æ’å…¥çš„ä½ç½®</span></span><br><span class="line">        <span class="keyword">while</span> (curNode) &#123;</span><br><span class="line">            <span class="keyword">if</span> (curNode.value === node.value) &#123;</span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (curNode.value &gt; node.value) &#123;</span><br><span class="line">                preNode = curNode;</span><br><span class="line">                curNode = curNode.left;</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (curNode.value &lt; node.value) &#123;</span><br><span class="line">                preNode = curNode;</span><br><span class="line">                curNode = curNode.right;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// æ’å…¥èŠ‚ç‚¹</span></span><br><span class="line">        <span class="keyword">if</span> (preNode.value &gt; node.value) &#123;</span><br><span class="line">            preNode.left = node;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (preNode.value &lt; node.value) &#123;</span><br><span class="line">            preNode.right = node;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åˆ é™¤èŠ‚ç‚¹</span></span><br><span class="line"><span class="comment">     * */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="title">remove</span>(<span class="params">target: <span class="built_in">number</span></span>)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (!<span class="built_in">this</span>.root) <span class="keyword">return</span>;</span><br><span class="line">        <span class="comment">// å½“å‰éå†çš„èŠ‚ç‚¹</span></span><br><span class="line">        <span class="keyword">let</span> curNode = <span class="built_in">this</span>.root;</span><br><span class="line">        <span class="comment">// è¦åˆ é™¤çš„ç›®æ ‡èŠ‚ç‚¹æ˜¯å…¶çˆ¶èŠ‚ç‚¹çš„å·¦å­èŠ‚ç‚¹è¿˜æ˜¯å³å­èŠ‚ç‚¹</span></span><br><span class="line">        <span class="keyword">let</span> isLeft = <span class="literal">true</span>;</span><br><span class="line">        <span class="comment">// è¦åˆ é™¤çš„ç›®æ ‡èŠ‚ç‚¹</span></span><br><span class="line">        <span class="keyword">let</span> targetNode;</span><br><span class="line">        <span class="comment">// è¦åˆ é™¤çš„ç›®æ ‡èŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹</span></span><br><span class="line">        <span class="keyword">let</span> preNode = curNode;</span><br><span class="line">        <span class="comment">// æ‰¾åˆ°å¯¹åº”çš„èŠ‚ç‚¹</span></span><br><span class="line">        <span class="keyword">while</span> (curNode) &#123;</span><br><span class="line">            <span class="keyword">if</span> (curNode.value === target) &#123;</span><br><span class="line">                targetNode = curNode;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (curNode.value &gt; target) &#123;</span><br><span class="line">                preNode = curNode;</span><br><span class="line">                isLeft = <span class="literal">true</span>;</span><br><span class="line">                curNode = curNode.left;</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (curNode.value &lt; target) &#123;</span><br><span class="line">                preNode = curNode;</span><br><span class="line">                isLeft = <span class="literal">false</span>;</span><br><span class="line">                curNode = curNode.right;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// ç›®æ ‡èŠ‚ç‚¹æ˜¯å¶å­èŠ‚ç‚¹ï¼Œæ— å·¦å³å­èŠ‚ç‚¹ï¼Œç›´æ¥åˆ é™¤</span></span><br><span class="line">        <span class="keyword">if</span> (!curNode.left &amp;&amp; !curNode.right) &#123;</span><br><span class="line">            <span class="keyword">if</span> (isLeft) &#123;</span><br><span class="line">                preNode.left = <span class="literal">null</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                preNode.right = <span class="literal">null</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// ç›®æ ‡èŠ‚ç‚¹æœ‰å·¦èŠ‚ç‚¹ï¼Œæ— å³èŠ‚ç‚¹</span></span><br><span class="line">        <span class="keyword">if</span> (curNode.left &amp;&amp; !curNode.right) &#123;</span><br><span class="line">            <span class="keyword">if</span> (isLeft) &#123;</span><br><span class="line">                preNode.left.value = curNode.left.value;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                preNode.right.value = curNode.left.value;</span><br><span class="line">            &#125;</span><br><span class="line">            curNode.left = <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// ç›®æ ‡èŠ‚ç‚¹æœ‰å³èŠ‚ç‚¹ï¼Œæ— å·¦èŠ‚ç‚¹</span></span><br><span class="line">        <span class="keyword">if</span> (!curNode.left &amp;&amp; curNode.right) &#123;</span><br><span class="line">            <span class="keyword">if</span> (isLeft) &#123;</span><br><span class="line">                preNode.left.value = curNode.right.value;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                preNode.right.value = curNode.right.value;</span><br><span class="line">            &#125;</span><br><span class="line">            curNode.right = <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * ç›®æ ‡èŠ‚ç‚¹å¤„äºä¸­é—´ä½ç½®ï¼Œå­˜åœ¨å·¦å­èŠ‚ç‚¹ä¹Ÿå­˜åœ¨å³å­èŠ‚ç‚¹</span></span><br><span class="line"><span class="comment">         * å¯ä»¥æœ‰ä»¥ä¸‹ä¸¤ç§å¤„ç†æ–¹å¼ï¼š</span></span><br><span class="line"><span class="comment">         * 1ã€æ‰¾åˆ°å½“å‰è¦åˆ é™¤èŠ‚ç‚¹å·¦å­æ ‘ä¸­æœ€å¤§çš„èŠ‚ç‚¹ä¸è¦åˆ é™¤çš„èŠ‚ç‚¹è¿›è¡Œæ›¿æ¢</span></span><br><span class="line"><span class="comment">         * 2ã€æ‰¾åˆ°å½“å‰è¦åˆ é™¤èŠ‚ç‚¹å³å­æ ‘ä¸­æœ€å°çš„èŠ‚ç‚¹ä¸è¦åˆ é™¤çš„èŠ‚ç‚¹è¿›è¡Œæ›¿æ¢</span></span><br><span class="line"><span class="comment">         *</span></span><br><span class="line"><span class="comment">         * ä»¥ç¬¬ä¸€ç§æ–¹å¼ä¸ºä¾‹ï¼Œç”¨å³å°†åˆ é™¤èŠ‚ç‚¹çš„å·¦å­æ ‘ä¸­æœ€å¤§çš„èŠ‚ç‚¹ä¸å°†è¦åˆ é™¤çš„èŠ‚ç‚¹æ›¿æ¢ï¼Œå­˜åœ¨ä»¥ä¸‹ä¸¤ç§æƒ…å†µï¼š</span></span><br><span class="line"><span class="comment">         * a.å½“å‰å·¦å­æ ‘æ ¹èŠ‚ç‚¹æ— å³å­æ ‘æˆ–è€…å³èŠ‚ç‚¹ï¼šç›´æ¥å°†å·¦å­æ ‘çš„æ ¹èŠ‚ç‚¹æ›¿æ¢åˆ°åˆ é™¤çš„èŠ‚ç‚¹ï¼Œå¹¶ä¸”å°†åˆ é™¤èŠ‚ç‚¹çš„å³å­æ ‘æŒ‚åˆ°å½“å‰å·¦å­æ ‘çš„æ ¹èŠ‚ç‚¹ä¸Š</span></span><br><span class="line"><span class="comment">         * b.å½“å‰å·¦å­æ ‘æ ¹èŠ‚ç‚¹å­˜åœ¨å³å­æ ‘æˆ–è€…å³èŠ‚ç‚¹ï¼šæ‰¾åˆ°å·¦å­æ ‘ä¸­çš„æœ€å¤§èŠ‚ç‚¹ï¼Œç”¨è¯¥æœ€å¤§èŠ‚ç‚¹å»æ›¿æ¢åˆ é™¤èŠ‚ç‚¹ï¼Œå¹¶å°†åˆ é™¤èŠ‚ç‚¹çš„å³å­æ ‘æŒ‚åˆ°è¯¥æœ€å¤§èŠ‚ç‚¹ä¸Š</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="keyword">if</span> (curNode.left &amp;&amp; curNode.right) &#123;</span><br><span class="line">            <span class="keyword">let</span> tempCurNode = curNode.left;</span><br><span class="line">            <span class="keyword">let</span> tempPreNode = curNode;</span><br><span class="line">            <span class="comment">// æ‰¾åˆ°å·¦å­æ ‘ä¸­å½“å‰çš„æœ€å¤§å€¼</span></span><br><span class="line">            <span class="keyword">while</span> (tempCurNode.right) &#123;</span><br><span class="line">                tempPreNode = tempCurNode;</span><br><span class="line">                tempCurNode = tempCurNode.right;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (tempPreNode === curNode) &#123;</span><br><span class="line">                <span class="comment">// å½“å‰å·¦å­æ ‘æ ¹èŠ‚ç‚¹æ— å³å­æ ‘æˆ–è€…å³èŠ‚ç‚¹ï¼šç›´æ¥å°†å·¦å­æ ‘çš„æ ¹èŠ‚ç‚¹æ›¿æ¢åˆ°åˆ é™¤çš„èŠ‚ç‚¹ï¼Œå¹¶ä¸”å°†åˆ é™¤èŠ‚ç‚¹çš„å³å­æ ‘æŒ‚åˆ°å½“å‰å·¦å­æ ‘çš„æ ¹èŠ‚ç‚¹ä¸Š</span></span><br><span class="line">                tempCurNode.right = curNode.right;</span><br><span class="line">                <span class="keyword">if</span> (isLeft) &#123;</span><br><span class="line">                    preNode.left = tempCurNode;</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    preNode.right = tempCurNode;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="comment">// å½“å‰å·¦å­æ ‘æ ¹èŠ‚ç‚¹å­˜åœ¨å³å­æ ‘æˆ–è€…å³èŠ‚ç‚¹ï¼šæ‰¾åˆ°å·¦å­æ ‘ä¸­çš„æœ€å¤§èŠ‚ç‚¹ï¼Œç”¨è¯¥æœ€å¤§èŠ‚ç‚¹å»æ›¿æ¢åˆ é™¤èŠ‚ç‚¹ï¼Œå¹¶å°†åˆ é™¤èŠ‚ç‚¹çš„å³å­æ ‘æŒ‚åˆ°è¯¥æœ€å¤§èŠ‚ç‚¹ä¸Š</span></span><br><span class="line">                curNode.value = tempCurNode.value;</span><br><span class="line">                tempPreNode.right = <span class="literal">null</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æœç´¢ç›®æ ‡èŠ‚ç‚¹</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> search(target: <span class="built_in">number</span>): TreeNode | <span class="literal">null</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> node = <span class="built_in">this</span>.root;</span><br><span class="line">        <span class="keyword">while</span> (node) &#123;</span><br><span class="line">            <span class="keyword">if</span> (node.value === target) &#123;</span><br><span class="line">                <span class="keyword">return</span> node;</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (node.value &gt; target) &#123;</span><br><span class="line">                node = node.left;</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (node.value &lt; target) &#123;</span><br><span class="line">                node = node.right;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è·å–æœ€å°èŠ‚ç‚¹</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> getMin(): TreeNode &#123;</span><br><span class="line">        <span class="keyword">let</span> node = <span class="built_in">this</span>.root;</span><br><span class="line">        <span class="keyword">while</span> (node.left) &#123;</span><br><span class="line">            node = node.left;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> node;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è·å–æœ€å¤§èŠ‚ç‚¹</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> getMax(): TreeNode &#123;</span><br><span class="line">        <span class="keyword">let</span> node = <span class="built_in">this</span>.root;</span><br><span class="line">        <span class="keyword">while</span> (node.right) &#123;</span><br><span class="line">            node = node.right;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> node;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * test</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">const</span> bst = <span class="keyword">new</span> BinarySearchTree(<span class="number">10</span>);</span><br><span class="line">bst.insert(<span class="number">5</span>);</span><br><span class="line">bst.insert(<span class="number">15</span>);</span><br><span class="line">bst.insert(<span class="number">3</span>);</span><br><span class="line">bst.insert(<span class="number">8</span>);</span><br><span class="line">bst.insert(<span class="number">1</span>);</span><br><span class="line">bst.insert(<span class="number">4</span>);</span><br><span class="line">bst.insert(<span class="number">6</span>);</span><br><span class="line">bst.insert(<span class="number">9</span>);</span><br><span class="line">bst.insert(<span class="number">13</span>);</span><br><span class="line">bst.insert(<span class="number">20</span>);</span><br><span class="line">bst.insert(<span class="number">11</span>);</span><br><span class="line">bst.insert(<span class="number">25</span>);</span><br><span class="line"></span><br><span class="line">bst.remove(<span class="number">8</span>);</span><br><span class="line"></span><br><span class="line">BinarySearchTree.IN_ORDER_TRAVERSE(bst.getRoot());</span><br><span class="line"></span><br></pre></td></tr></table></figure>
</p>
      <div class="post-button"><a class="btn" href="/2021/05/09/bst/" rel="noopener"><i class="fa fa-angle-double-right fa-fw"></i>Read More</a></div>
    </div>
  </div>
  <div class="lx-entry padding">
    <div>
      <h2 class="title"><a href="/2021/05/08/viewport/">ç§»åŠ¨ç«¯é€‚é…æ€»ç»“</a></h2>
      <span class="lx-post-detail"><i class="fa fa-calendar-o"></i> 2021-05-08</span>
      <p><p>å¦‚æœä¸‹é¢è¿™è¡Œä»£ç ç»å¸¸è§åˆ°ï¼Œä½†åˆå¯¹å…¶ä¸€çŸ¥åŠè§£ï¼Œé‚£ä¹ˆè¿™ç¯‡æ–‡ç« ä¹Ÿè®¸å¯ä»¥å¸®ä½ è§£æƒ‘</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">meta</span>Â <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span>Â <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="ä¸€ã€åŸºç¡€çŸ¥è¯†æ¢³ç†"><a href="#ä¸€ã€åŸºç¡€çŸ¥è¯†æ¢³ç†" class="headerlink" title="ä¸€ã€åŸºç¡€çŸ¥è¯†æ¢³ç†"></a>ä¸€ã€åŸºç¡€çŸ¥è¯†æ¢³ç†</h2><h3 id="1-1ã€åƒç´ "><a href="#1-1ã€åƒç´ " class="headerlink" title="1.1ã€åƒç´ "></a>1.1ã€åƒç´ </h3><h4 id="a-ç‰©ç†åƒç´ "><a href="#a-ç‰©ç†åƒç´ " class="headerlink" title="a.ç‰©ç†åƒç´ "></a>a.ç‰©ç†åƒç´ </h4><p>ç‰©ç†åƒç´ ä¹Ÿå°±æ˜¯ç§»åŠ¨è®¾å¤‡ä¸­æ‰€æåˆ°çš„åˆ†è¾¨ç‡ï¼Œæ¯”å¦‚æ‰‹æœºçš„åˆ†è¾¨ç‡ä¸º<code>750x1334</code>åƒç´ ï¼Œå…¶æŒ‡çš„æ˜¯å±å¹•çš„å‚ç›´æ–¹å‘ä¸Šæœ‰<code>1334</code>ä¸ªç‰©ç†åƒç´ å—ï¼Œæ°´å¹³æ–¹å‘ä¸Šæœ‰<code>750</code>ä¸ªåƒç´ å—ã€‚å…¶åˆ†è¾¨ç‡è¶Šé«˜ï¼Œæ‰€å±•ç¤ºçš„å›¾åƒå°±è¶Šæ¸…æ™°ã€‚</p>
<h4 id="b-è®¾å¤‡ç‹¬ç«‹åƒç´ -device-independent-pixels-CSSåƒç´ "><a href="#b-è®¾å¤‡ç‹¬ç«‹åƒç´ -device-independent-pixels-CSSåƒç´ " class="headerlink" title="b.è®¾å¤‡ç‹¬ç«‹åƒç´ (device-independent pixels)/CSSåƒç´ "></a>b.è®¾å¤‡ç‹¬ç«‹åƒç´ <code>(device-independent pixels)</code>/CSSåƒç´ </h4><p>è®¾å¤‡çš„ç‹¬ç«‹åƒç´ ï¼Œä¸åŒäºç‰©ç†åƒç´ ï¼Œæ›´å¤šæŒ‡çš„æ˜¯è®¾è®¡ç¨¿ä¸­çš„å°ºå¯¸ï¼Œæ¯”å¦‚è®¾è®¡ç¨¿ä¸­ä¸€ä¸ªImgçš„å®½é«˜ä¸º<code>100x100</code>åƒç´ ï¼Œè¿™ä¸ªå°±æ˜¯ç‹¬ç«‹åƒç´ ï¼Œä¹Ÿå¯¹åº”äºcssåƒç´ ï¼Œæ˜¯è™šæ‹ŸåŒ–çš„ã€‚</p>
<p>é‚£ä¹ˆï¼Œå¯èƒ½ä¼šæœ‰ç–‘é—®ï¼Œè¿™æ‰‹æœºåˆ†è¾¨ç‡æœ‰<code>750x1334</code>åƒç´ ï¼Œä½†æ˜¯å±å¹•å¤§å°åªæœ‰<code>375x667</code>åƒç´ ï¼Œè¿™ä¸¤è€…æœ‰ä»€ä¹ˆå…³ç³»å‘¢ï¼Ÿ</p>
<p>è¿™é‡Œå°±éœ€è¦å¼•å…¥cssåƒç´ ï¼Œä¹Ÿå°±æ˜¯è®¾å¤‡ç‹¬ç«‹åƒç´ ã€‚cssåƒç´ ä¸­1pxå¯ä»¥ä»£è¡¨å¤šä¸ªç‰©ç†åƒç´ ï¼Œåœ¨dprä¸º2çš„æ‰‹æœºä¸­ï¼ŒCSS <code>1px</code>å¯ä»¥å¯¹åº”2ä¸ªç‰©ç†åƒç´ ï¼Œä¹Ÿå°±æ˜¯ç›¸æ¯”äºåˆ†è¾¨ç‡ä¸º<code>375x667</code>çš„æ‰‹æœºæ¥è¯´ï¼Œ<code>750x1334</code>åˆ†è¾¨ç‡çš„æ‰‹æœºä¼šæ›´åŠ æ¸…æ™°ç»†è…»ã€‚</p>
<p>å¦‚ä¸‹å›¾æ‰€ç¤ºï¼šè¿™æ˜¯<code>dpr = 2</code>çš„æƒ…å†µï¼Œæœ€å¤–æ¡†ä¸ºcssçš„<code>1px</code>ï¼Œä½†å…¶å´è¦†ç›–äº†4ä¸ªç‰©ç†åƒç´ ï¼ˆè“è‰²çš„å°æ–¹å—ï¼‰</p>
<img src="/images/viewport/1.png" width = "100" alt="1" align=center />

<p>å½“ç”¨æˆ·ç¼©å°æ—¶ï¼šç‰©ç†åƒç´ ï¼ˆè“è‰²å°æ–¹å—ï¼‰æ˜¯ä¸ä¼šæ”¹å˜çš„ï¼Œæ­¤æ—¶ä¸€ä¸ªç‰©ç†åƒç´ ä»åŸæ¥åªè¦†ç›–1/4çš„CSSåƒç´ å˜æˆäº†å¯è¦†ç›–å¤§äº7/10çš„CSSåƒç´ ï¼Œç›¸å½“äºä¸€ä¸ªç‰©ç†åƒç´ æ‰€èƒ½å±•ç¤ºçš„CSSåƒç´ æ›´å¤šï¼Œæ‰€ä»¥ç”¨æˆ·æ‰€èƒ½çœ‹åˆ°çš„å†…å®¹ä¹Ÿæ›´å¤šï¼Œä½†å›¾åƒå˜å°</p>
<img src="/images/viewport/2.png" width = "100" alt="1" align=center />

<p>åä¹‹ï¼Œå½“ç”¨æˆ·æ”¾å¤§æ—¶ï¼šåŸæ¥ä¸€ä¸ªCSSåƒç´ ä»…éœ€è¦4ä¸ªç‰©ç†åƒç´ ä¾¿èƒ½å±•ç¤ºï¼Œæ”¾å¤§åä¸€ä¸ªCSSåƒç´ æ‰€éœ€çš„ç‰©ç†åƒç´ å¯èƒ½è¦8-9ä¸ªï¼ˆå¤§æ¦‚ï¼‰ï¼Œæ‰€ä»¥èƒ½å±•ç¤ºçš„CSSåƒç´ å˜å°‘ï¼Œå›¾åƒå˜å¤§ï¼Œç”¨æˆ·æ‰€èƒ½çœ‹åˆ°çš„å†…å®¹ä¹Ÿå°±å˜å°‘äº†</p>
<img src="/images/viewport/3.png" width = "100" alt="1" align=center />

<h3 id="1-2ã€è®¾å¤‡åƒç´ æ¯”dpr"><a href="#1-2ã€è®¾å¤‡åƒç´ æ¯”dpr" class="headerlink" title="1.2ã€è®¾å¤‡åƒç´ æ¯”dpr"></a>1.2ã€è®¾å¤‡åƒç´ æ¯”dpr</h3><p><code>dpr=ç‰©ç†åƒç´ /ç‹¬ç«‹åƒç´ </code>ï¼Œé€šè¿‡jså¯ä»¥è·å–ï¼š<code>window.devicesPixelRatio</code>ã€‚</p>
<h2 id="äºŒã€è§†å£viewport"><a href="#äºŒã€è§†å£viewport" class="headerlink" title="äºŒã€è§†å£viewport"></a>äºŒã€è§†å£viewport</h2><h3 id="2-1ã€PCä¸ç§»åŠ¨ç«¯çš„è§†å£viewport"><a href="#2-1ã€PCä¸ç§»åŠ¨ç«¯çš„è§†å£viewport" class="headerlink" title="2.1ã€PCä¸ç§»åŠ¨ç«¯çš„è§†å£viewport"></a>2.1ã€PCä¸ç§»åŠ¨ç«¯çš„è§†å£viewport</h3><h4 id="2-1-1ã€PCç«¯è§†å£"><a href="#2-1-1ã€PCç«¯è§†å£" class="headerlink" title="2.1.1ã€PCç«¯è§†å£"></a>2.1.1ã€PCç«¯è§†å£</h4><p>åœ¨<code>html</code>ã€<code>body</code>è®¾ç½®<code>width:100%;height:100%;</code>çš„æ—¶å€™ï¼Œå®ƒå¹¶ä¸æ˜¯æ— æ•ˆçš„ã€‚100%è¿™ç§ç™¾åˆ†æ•°åº”è¯¥æ˜¯ç»§æ‰¿çˆ¶å…ƒç´ è€Œæ¥çš„ã€‚é‚£åœ¨è¿™é‡Œæ˜¯ç»§æ‰¿å“ªé‡Œçš„å‘¢ï¼Ÿ</p>
<p>åœ¨PCæµè§ˆå™¨ä¸­ï¼Œæœ‰ä¸€ä¸ªç”¨æ¥çº¦æŸCSSå¸ƒå±€è§†å£çš„ä¸œè¥¿ï¼Œåˆå«åšåˆå§‹åŒ…å«å—ã€‚è¿™ä¹Ÿå°±æ˜¯æ‰€æœ‰å®½é«˜ç»§æ‰¿çš„ç”±æ¥ã€‚é™¤å»<code>margin</code>ã€<code>padding</code>ï¼Œæµè§ˆå™¨å¸ƒå±€è§†å£<code>layout viewport</code>å’Œå¯è§†çª—å£<code>visual viewport</code>å®½é«˜æ˜¯ä¸€è‡´çš„ï¼Œç»Ÿç§°ä¸ºè§†å£<code>viewport</code>ï¼ŒåŒæ—¶ä¹Ÿå’Œæµè§ˆå™¨æœ¬èº«çš„å®½åº¦ä¸€è‡´ã€‚</p>
<p>ä¸¾ä¸ªä¾‹å­ï¼šä¸‹å›¾ä¸­ï¼Œå½“å‰æµè§ˆå™¨çš„å®½åº¦<code>1365px</code>ï¼Œåˆ™ç›¸åº”çš„bodyå®½åº¦ä¹Ÿä¸º<code>1365px</code>ï¼Œæ–‡å­—æ˜¾ç¤ºæ­£å¸¸ï¼Œé˜…è¯»æ— éšœç¢</p>
<p>é€šè¿‡<code>document.documentElement.clientWidth</code>å¯ä»¥è·å–å¸ƒå±€è§†å£ã€‚</p>
<img src="/images/viewport/4.png" width = "800" alt="1" align=center />



<h4 id="2-2ã€ç§»åŠ¨ç«¯"><a href="#2-2ã€ç§»åŠ¨ç«¯" class="headerlink" title="2.2ã€ç§»åŠ¨ç«¯"></a>2.2ã€ç§»åŠ¨ç«¯</h4><h5 id="2-2-1ã€å¸ƒå±€è§†å£"><a href="#2-2-1ã€å¸ƒå±€è§†å£" class="headerlink" title="2.2.1ã€å¸ƒå±€è§†å£"></a>2.2.1ã€å¸ƒå±€è§†å£</h5><img src="/images/viewport/5.png" width = "400" alt="1" align=center />


<p>åœ¨ç§»åŠ¨ç«¯ï¼Œé»˜è®¤çš„æƒ…å†µä¸‹ï¼Œç§»åŠ¨ç«¯æµè§ˆå™¨å‚å•†ä¸ºäº†è®©ç”¨æˆ·åœ¨å°å±å¹•ä¸‹ä¼ ç»Ÿçš„PCç½‘é¡µä¹Ÿèƒ½å¤Ÿå¾ˆå¥½åœ°å±•ç¤ºï¼Œä¸€èˆ¬ä¼šæŠŠå¸ƒå±€è§†å£å®½åº¦è®¾ç½®åœ°å¾ˆå¤§å»å­˜æ”¾é¡µé¢ï¼Œåœ¨<code>768px ~ 1024px</code>ä¹‹é—´ï¼Œæœ€å¸¸è§çš„å®½åº¦æ˜¯<code>980px</code>ã€‚è¿™ä¸ªå®½åº¦å¯ä»¥é€šè¿‡<code>document.documentElement.clientWidth</code>å¾—åˆ°ã€‚</p>
<h5 id="2-2-2ã€è§†è§‰è§†å£"><a href="#2-2-2ã€è§†è§‰è§†å£" class="headerlink" title="2.2.2ã€è§†è§‰è§†å£"></a>2.2.2ã€è§†è§‰è§†å£</h5><img src="/images/viewport/6.png" width = "400" alt="1" align=center />


<p>å¯¹äºè§†è§‰è§†å£æ¥è¯´ï¼Œè¿™ä¸ªä¸œè¥¿æ˜¯å‘ˆç°ç»™ç”¨æˆ·çš„ï¼Œå®ƒæ˜¯ç”¨æˆ·çœ‹åˆ°ç½‘é¡µåŒºåŸŸå†…CSSåƒç´ çš„æ•°é‡ã€‚ï¼ˆCSSåƒç´ çš„æ•°é‡è¶Šå¤šï¼Œè¯´æ˜å±•ç¤ºçš„é¡µé¢å…ƒç´ è¶Šå¤šï¼Œçœ‹åˆ°çš„é¡µé¢å…ƒç´ ä¹Ÿå°±è¶Šå°ï¼‰</p>
<p>å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œåœ¨ç§»åŠ¨ç«¯ç¼©æ”¾ä¸ä¼šæ”¹å˜å¸ƒå±€è§†å£çš„å®½åº¦ï¼Œå½“ç¼©å°çš„æ—¶å€™ï¼Œå±å¹•è¦†ç›–çš„cssåƒç´ å˜å¤šï¼Œè§†è§‰è§†å£å˜å¤§ï¼Œçœ‹åˆ°çš„å­—ä½“å›¾å½¢å­—ä½“å˜å°ï¼Œåä¹‹äº¦ç„¶ã€‚</p>
<p>è€Œåœ¨PCç«¯ï¼Œç¼©æ”¾å¯¹åº”å¸ƒå±€å®½åº¦å’Œè§†è§‰çª—å£å®½åº¦éƒ½æ˜¯è”åŠ¨çš„ã€‚è€Œæµè§ˆå™¨å®½åº¦æœ¬èº«æ˜¯å›ºå®šçš„ï¼Œæ— è®ºæ€ä¹ˆç¼©æ”¾éƒ½ä¸å—å½±å“ã€‚</p>
<h5 id="2-2-3ã€è§†å£ç¼ºé™·"><a href="#2-2-3ã€è§†å£ç¼ºé™·" class="headerlink" title="2.2.3ã€è§†å£ç¼ºé™·"></a>2.2.3ã€è§†å£ç¼ºé™·</h5><img src="/images/viewport/7.png" width = "400" alt="1" align=center />

<p>ä»ä¸Šå›¾å¯ä»¥çœ‹åˆ°ï¼Œç”¨æˆ·æ‰‹æœºå±å¹•æ‰€å±•ç¤ºçš„å†…å®¹ï¼ˆ<code>visual viewport</code>ï¼‰ä»…å äº†<code>layout viewport</code>çš„ä¸€éƒ¨åˆ†ï¼Œå¹¶ä¸èƒ½å…¨éƒ¨å±•ç¤ºå‡ºæ¥ã€‚</p>
<p>é€šè¿‡<code>chrome</code>æ¨¡æ‹Ÿå‡ºæ‰‹æœºçš„å±å¹•</p>
<p>å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œå¸ƒå±€è§†å£çš„å®½åº¦ï¼ˆè¿™é‡Œ<code>body</code>è¢«é»˜è®¤è®¾ç½®æˆäº†<code>980px</code>ï¼‰æ˜¯è¦è¿œè¿œå¤§äºç§»åŠ¨ç«¯æµè§ˆå™¨çš„å®½åº¦(<code>360px</code>)çš„ã€‚å¤§å¤šæ•°æµè§ˆå™¨ä¼šé»˜è®¤é“ºå¼€æ•´ä¸ªå¸ƒå±€è§†å£åˆ°æ•´ä¸ªå±å¹•ä¸­ï¼Œå¯¼è‡´é¡µé¢ä¸­çš„å­—ä½“éå¸¸å°ï¼Œé˜…è¯»ä½“éªŒéå¸¸å·®ã€‚</p>
<p>è¯•æƒ³ä¸€ä¸‹ï¼Œå¦‚æœä¸€ä¸ªç½‘é¡µä¸å¯¹ç§»åŠ¨ç«¯è¿›è¡Œé€‚é…ï¼Œç”¨æˆ·è¿›è¡Œé˜…è¯»çš„æ—¶å€™ï¼Œç”±äºå­—ä½“å¤ªå°ï¼Œå°±ä¸å¾—ä¸æ‰‹åŠ¨æ”¾å¤§ä»¥ä¾¿äºé˜…è¯»ï¼Œä½†æ˜¯æ”¾å¤§çš„æ—¶å€™å¦å¤–ä¸€ä¸ªé—®é¢˜åˆå‡ºç°äº†ï¼š</p>
<img src="/images/viewport/8.png" width = "400" alt="1" align=center />

<p>ä»ä¸Šå›¾ä¸­å¯ä»¥çœ‹åˆ°ï¼Œè™½ç„¶æ–‡å­—å˜å¤§äº†ï¼Œä½†æ˜¯ç›¸åº”çš„ï¼Œå±å¹•ä¸­æ‰€æ˜¾ç¤ºçš„ä¿¡æ¯ä¹Ÿå˜å°‘äº†ï¼Œç”¨æˆ·éœ€è¦æ‰‹åŠ¨å»æ»‘åŠ¨æ•´ä¸ªé¡µé¢è®©ç›®æ ‡ä¿¡æ¯å±•ç¤ºå‡ºæ¥ã€‚</p>
<h5 id="2-2-4ã€ç†æƒ³è§†å£"><a href="#2-2-4ã€ç†æƒ³è§†å£" class="headerlink" title="2.2.4ã€ç†æƒ³è§†å£"></a>2.2.4ã€ç†æƒ³è§†å£</h5><p>æ‰€ä»¥åæ¥è‹¹æœå¼•å…¥äº†ç†æƒ³è§†å£çš„æ¦‚å¿µï¼Œå®ƒå¯¹è®¾å¤‡æ¥è¯´æ˜¯æœ€ç†æƒ³çš„å¸ƒå±€è§†å£å°ºå¯¸ï¼Œç”¨æˆ·è¿›å…¥é¡µé¢æ—¶å°±ä¸éœ€è¦æ‰‹åŠ¨å†å»ç¼©æ”¾é¡µé¢ã€‚</p>
<p>æ‰€ä»¥ä¾¿æœ‰äº†è¿™æ®µä»£ç ï¼š</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">meta</span>Â <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span>Â <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong><code>width=device-width</code>ï¼š</strong>Â æŠŠå¸ƒå±€è§†å£è®¾ç½®æˆä¸ºæµè§ˆå™¨ï¼ˆå±å¹•ï¼‰çš„å®½åº¦ã€‚</p>
<p><strong><code>initial-scale=1</code>Â ï¼š</strong>åˆå§‹ç¼©æ”¾çš„æ¯”ä¾‹æ˜¯1ï¼Œä½¿ç”¨å®ƒçš„æ—¶å€™ï¼ŒåŒæ—¶ä¹Ÿä¼šå°†å¸ƒå±€è§†å£çš„å°ºå¯¸è®¾ç½®ä¸ºåˆå§‹ç¼©æ”¾æ¯”ä¾‹åçš„å°ºå¯¸ã€‚è€Œç¼©æ”¾çš„å°ºå¯¸å°±æ˜¯åŸºäºå±å¹•çš„å®½åº¦æ¥çš„ï¼Œä¹Ÿå°±èµ·åˆ°äº†å’Œ<code>width=device-width</code>åŒæ ·çš„æ•ˆæœã€‚</p>
<p>æ¯ä¸ªç§»åŠ¨è®¾å¤‡æµè§ˆå™¨ä¸­éƒ½æœ‰ä¸€ä¸ªç†æƒ³çš„å®½åº¦ï¼Œè¿™ä¸ªç†æƒ³çš„å®½åº¦æ˜¯æŒ‡cssä¸­çš„å®½åº¦ï¼Œè·Ÿè®¾å¤‡çš„ç‰©ç†å®½åº¦æ²¡æœ‰å…³ç³»ï¼Œåœ¨cssä¸­ï¼Œè¿™ä¸ªå®½åº¦å°±ç›¸å½“äº100%çš„æ‰€ä»£è¡¨çš„é‚£ä¸ªå®½åº¦ï¼ˆè¿™ä¸ªå…¶å®å°±æ˜¯<code>devices-width</code>ï¼‰ã€‚</p>
<p>æˆ‘ä»¬å¯ä»¥ç”¨<code>meta</code>æ ‡ç­¾æŠŠ<code>viewport</code>çš„å®½åº¦è®¾ä¸ºé‚£ä¸ªç†æƒ³çš„å®½åº¦ï¼Œå¦‚æœä¸çŸ¥é“è¿™ä¸ªè®¾å¤‡çš„ç†æƒ³å®½åº¦æ˜¯å¤šå°‘ï¼Œé‚£ä¹ˆç”¨<code>device-width</code>è¿™ä¸ªç‰¹æ®Šå€¼å°±è¡Œäº†ï¼ŒåŒæ—¶<code>initial-scale=1</code>ä¹Ÿæœ‰æŠŠ<code>viewport</code>çš„å®½åº¦è®¾ä¸ºç†æƒ³å®½åº¦çš„ä½œç”¨ã€‚</p>
<p>ä¸ºä»€ä¹ˆéœ€è¦æœ‰ç†æƒ³çš„<code>viewport</code>å‘¢ï¼Ÿæ¯”å¦‚ä¸€ä¸ªåˆ†è¾¨ç‡ä¸º<code>320x480</code>çš„æ‰‹æœºç†æƒ³<code>layout viewport</code>çš„å®½åº¦æ˜¯<code>320px</code>ï¼Œè€Œå¦ä¸€ä¸ªå±å¹•å°ºå¯¸ç›¸åŒä½†åˆ†è¾¨ç‡ä¸º<code>640x960</code>çš„æ‰‹æœºçš„ç†æƒ³<code>layout viewport</code>å®½åº¦ä¹Ÿæ˜¯ä¸º<code>320px</code>ï¼Œé‚£ä¸ºä»€ä¹ˆåˆ†è¾¨ç‡å¤§çš„è¿™ä¸ªæ‰‹æœºçš„ç†æƒ³å®½åº¦è¦è·Ÿåˆ†è¾¨ç‡å°çš„é‚£ä¸ªæ‰‹æœºçš„ç†æƒ³å®½åº¦ä¸€æ ·å‘¢ï¼Ÿ</p>
<p>è¿™æ˜¯å› ä¸ºï¼Œåªæœ‰è¿™æ ·æ‰èƒ½ä¿è¯åŒæ ·çš„ç½‘ç«™åœ¨ä¸åŒåˆ†è¾¨ç‡çš„è®¾å¤‡ä¸Šçœ‹èµ·æ¥éƒ½æ˜¯ä¸€æ ·æˆ–å·®ä¸å¤šçš„ã€‚å®é™…ä¸Šï¼Œç°åœ¨å¸‚é¢ä¸Šè™½ç„¶æœ‰é‚£ä¹ˆå¤šä¸åŒç§ç±»ä¸åŒå“ç‰Œä¸åŒåˆ†è¾¨ç‡çš„æ‰‹æœºï¼Œä½†å®ƒä»¬çš„ç†æƒ³<code>viewport</code>å®½åº¦å½’çº³èµ·æ¥æ— éä¹Ÿå°± <code>320ã€360ã€384ã€400</code>ç­‰å‡ ç§ï¼Œéƒ½æ˜¯éå¸¸æ¥è¿‘çš„ï¼Œç†æƒ³å®½åº¦çš„ç›¸è¿‘ä¹Ÿå°±æ„å‘³ç€æˆ‘ä»¬é’ˆå¯¹æŸä¸ªè®¾å¤‡çš„ç†æƒ³<code>viewport</code>è€Œåšå‡ºçš„ç½‘ç«™ï¼Œåœ¨å…¶ä»–è®¾å¤‡ä¸Šçš„è¡¨ç°ä¹Ÿä¸ä¼šç›¸å·®éå¸¸å¤šç”šè‡³æ˜¯è¡¨ç°ä¸€æ ·çš„ã€‚</p>
<h2 id="ä¸‰ã€ç§»åŠ¨ç«¯é€‚é…æ–¹æ¡ˆ"><a href="#ä¸‰ã€ç§»åŠ¨ç«¯é€‚é…æ–¹æ¡ˆ" class="headerlink" title="ä¸‰ã€ç§»åŠ¨ç«¯é€‚é…æ–¹æ¡ˆ"></a>ä¸‰ã€ç§»åŠ¨ç«¯é€‚é…æ–¹æ¡ˆ</h2><p>åœ¨ç§»åŠ¨ç«¯ä¸Šï¼Œæœ‰äº†<code>layout viewport</code>çš„å›ºå®šå®½åº¦ä¹‹åï¼Œå†è¿›è¡Œç§»åŠ¨ç«¯é€‚é…å°±ä¸å†æ˜¯éš¾äº‹ï¼Œç®€å•æ€»ç»“äº†å¦‚ä¸‹å‡ ç§ç§»åŠ¨ç«¯é€‚é…çš„æ–¹æ³•ï¼š</p>
<h3 id="3-1ã€flexå¼¹æ€§ç›’æ¨¡å‹å®ç°çš„ç§»åŠ¨ç«¯é€‚é…"><a href="#3-1ã€flexå¼¹æ€§ç›’æ¨¡å‹å®ç°çš„ç§»åŠ¨ç«¯é€‚é…" class="headerlink" title="3.1ã€flexå¼¹æ€§ç›’æ¨¡å‹å®ç°çš„ç§»åŠ¨ç«¯é€‚é…"></a>3.1ã€flexå¼¹æ€§ç›’æ¨¡å‹å®ç°çš„ç§»åŠ¨ç«¯é€‚é…</h3><p>ä»¥æ·˜å®ç§»åŠ¨ç«¯é¡µé¢ä¸ºä¾‹ï¼š<a target="_blank" rel="noopener" href="https://main.m.taobao.com/index.html">https://main.m.taobao.com/index.html</a></p>
<p>é€šè¿‡å°†ç›’å­è®¾ç½®æˆ<code>flex</code>å¸ƒå±€ä»¥åŠ<code>width:100%</code>ï¼Œæ ¹æ®éœ€è¦æ¥è®¾ç½®<code>justify-content</code>ä»¥åŠ<code>align-items</code>æ¥å¯¹é½å±…ä¸­ç­‰ï¼Œå®ç°åœ¨ä¸åŒå±å¹•å°ºå¯¸çš„ç§»åŠ¨ç«¯ä¸‹çš„é€‚é…ã€‚</p>
<p>åœ¨éœ€è¦é€‚é…çš„åœ°æ–¹ä½¿ç”¨å¼¹æ€§ç›’æ¨¡å‹ä»¥åŠç™¾åˆ†æ¯”ï¼Œåœ¨ä¸éœ€è¦é€‚é…çš„åœ°æ–¹ä½¿ç”¨pxï¼Œä¸¾ä¸ªä¾‹å­ï¼Œåº•éƒ¨tapå°±æ˜¯é€‚é…çš„ï¼Œè€Œä¸­é—´çš„å¯¼èˆªï¼Œå¦‚â€å¤©çŒ«æ–°å“ï¼Œä»Šæ—¥çˆ†æ¬¾â€œçš„å›¾æ ‡å—æ˜¯åŸå§‹<code>px</code>å°ºå¯¸ã€‚</p>
<img src="/images/viewport/9.png" width = "400" alt="1" align=center />



<p>è¿™ç§é€‚é…æ–¹æ¡ˆåœ¨æ‰‹æœºç«¯æ˜¯OKçš„ï¼Œä½†ä¸€æ—¦è½¬æ¢åˆ°ipadç«¯â€¦.ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œä¸­é—´çš„å¯¼èˆªæ ç”±äº<code>div</code>å®½åº¦è¿‡é•¿ï¼Œè€Œå…¶ä¸­çš„å›¾æ ‡å¤§å°è¿˜æ˜¯åŸå§‹å°ºå¯¸ï¼Œå¯¼è‡´ç›’å­è¿‡å¤§ï¼Œå›¾æ ‡æ— æ³•å¡«å……æ»¡æ•´ä¸ªç›’å­ï¼Œæ›´åˆ«è¯´æ˜¯åˆ‡æ¢åˆ†é¡µäº†ï¼ˆè¿™ä¸ªç›’å­ä¸­æ˜¯æœ‰åˆ†é¡µå™¨çš„ï¼‰</p>
<img src="/images/viewport/10.png" width = "400" alt="1" align=center />

<p><strong>è¿™ç§é€‚é…æ–¹æ¡ˆçš„ä¼˜ç¼ºç‚¹ï¼š</strong></p>
<p><strong>ä¼˜ç‚¹ï¼š</strong><br>å®ç°ç®€å•ä¾¿æ·ï¼Œ<code>flex+ç™¾åˆ†æ¯”/flex+vw</code>çµæ´»æ–¹ä¾¿ï¼Œæ— éœ€å¼•å…¥å…¶ä»–åº“ä¾¿å¯ä»¥å®ç°å¤§éƒ¨åˆ†æ‰‹æœºçš„å±å¹•é€‚é…<br><strong>ç¼ºç‚¹ï¼š</strong><br>é’ˆå¯¹äºå¹³æ¿ç±»çš„ç§»åŠ¨ç«¯ï¼Œè¿˜éœ€è¦å¦å¤–åšé€‚é…æ‰èƒ½å…¼å®¹ï¼Œæ¯”è¾ƒç¹ç</p>
<h3 id="3-2ã€rem-px2remé€‚é…æ–¹æ¡ˆ"><a href="#3-2ã€rem-px2remé€‚é…æ–¹æ¡ˆ" class="headerlink" title="3.2ã€rem+px2remé€‚é…æ–¹æ¡ˆ"></a>3.2ã€rem+px2remé€‚é…æ–¹æ¡ˆ</h3><pre><code>åœ¨W3Cå®˜ç½‘ä¸Šæ˜¯è¿™æ ·æè¿°remçš„â€”â€”â€œfont size of the root elementâ€ ã€‚
</code></pre>
<p>åŸºæœ¬æ€è·¯ï¼š</p>
<p>å‡å¦‚è¯´æˆ‘ä»¬çš„è®¾è®¡ç¨¿ä¸º<code>750px</code>ï¼Œç°åœ¨æŠŠè®¾è®¡ç¨¿åˆ†æˆ<code>10</code>ä»½ï¼Œä¸€ä»½å°±ä¸º<code>75px</code>ã€‚</p>
<p>åŒæ ·ï¼Œè·å–åˆ°ç§»åŠ¨ç«¯å±å¹•çš„å®½åº¦ï¼Œå°†å…¶åˆ†æˆåä»½ï¼Œå¹¶ä¸”å°†æ¯ä»½çš„å¤§å°è®¾ç½®æˆ<code>1rem</code>ï¼Œä¹Ÿå°±æ˜¯è®¾ç½®<code>html</code>çš„<code>font-size</code>ã€‚è®¾ç½®<code>div</code>å¤§å°æ—¶ï¼Œä¾¿å¯ç”¨<code>rem</code>è¿›è¡Œè®¾ç½®ï¼Œæ¯”å¦‚ï¼Œè®¾è®¡ç¨¿ä¸­ä¸€ä¸ª<code>Img</code>æ˜¯<code>75 x 75</code>ï¼Œä»£ç ä¸­å°±å¯ä»¥è®¾ç½®è¿™ä¸ª<code>img</code>ä¸º<code>1rem</code>ï¼Œå³<code>img</code>çš„å®½åº¦æ˜¯è®¾è®¡ç¨¿çš„<code>1/10</code>ï¼Œå¯¹åº”çš„æ¯”ä¾‹åœ¨æ‰‹æœºä¸­ä¹Ÿå°±æ˜¯å±å¹•å®½åº¦çš„<code>1/10</code>ï¼Œä¹Ÿå°±æ˜¯<code>1rem</code>ã€‚åˆ†æˆå‡ ä»½å…¨ç”±è‡ªå·±æ¥å†³å®šï¼Œå¯ä»¥åˆ†æˆ<code>10</code>ä»½ï¼Œä¹Ÿå¯ä»¥åˆ†æˆ<code>20</code>ä»½ï¼Œç­‰ç­‰ã€‚</p>
<p>è¿™æ ·å¯ä»¥å®ç°é€‚é…ï¼Œä½†æ˜¯é—®é¢˜åœ¨äºï¼Œæ¯æ¬¡å†™cssçš„å®½é«˜æ—¶ï¼Œéƒ½éœ€è¦é€šè¿‡è‡ªå·±å†è¿›è¡Œè®¡ç®—è½¬æ¢æˆ<code>rem</code>ï¼Œæ¯”å¦‚å¦‚æœæœ‰ä¸ª<code>img</code>æ˜¯<code>50x50</code>åƒç´ ï¼Œå®ƒåœ¨è®¾è®¡ç¨¿ä¸­çš„æ¯”ä¾‹æ˜¯ <code>50/75 = 0.667</code>ä»½ï¼Œç›¸å½“äºåœ¨ä»£ç ä¸­æˆ‘ä»¬éœ€è¦å†™<code>0.667rem</code>ï¼Œè¿™å…¶å®æ˜¯éå¸¸ç¹çä¸”ä½æ•ˆçš„ã€‚</p>
<p>ä½†æ˜¯ï¼Œç°æœ‰å·¥å…·å¯ä»¥å¸®æˆ‘ä»¬è§£å†³è¿™ä¸ªé—®é¢˜ï¼š<code>postcss-px2rem</code>ã€‚æˆ‘ä»¬åœ¨å†™ä»£ç çš„æ—¶å€™è¿˜æ˜¯å¯ä»¥ç”¨<code>px</code>ï¼Œè®¾è®¡ç¨¿ä¸­å†™äº†å¤šå°‘<code>px</code>æˆ‘ä»¬ä»£ç ä¸­å°±å†™å¤šå°‘<code>px</code>ï¼Œåœ¨ä»£ç ç¼–è¯‘é˜¶æ®µï¼Œ<code>postcss-px2rem</code>å°±ä¼šå°†<code>px</code>ç¼–è¯‘æˆç›¸åº”çš„<code>rem</code>ï¼Œè¿™æ ·æˆ‘ä»¬å°±æ— éœ€æ‰‹åŠ¨å»æ¢ç®—ï¼Œè¿™æ˜¯ä¸€ç§æ¯”è¾ƒæˆç†Ÿçš„ç§»åŠ¨ç«¯é€‚é…æ–¹æ¡ˆã€‚ï¼ˆè¿™é‡Œä¸æ·±å…¥æ¢ç©¶<code>1px</code>çš„é—®é¢˜ï¼Œè§£å†³<code>1px</code>é—®é¢˜éœ€è¦é…åˆ<code>scale</code>ä»¥åŠ<code>dpr</code>è¿›è¡Œï¼‰</p>
<p>ä¸‹é¢ä»¥<code>vue</code>é¡¹ç›®ä¸”<code>750px</code>è®¾è®¡ç¨¿ä¸ºä¾‹ï¼š</p>
<p>æˆ‘ä»¬è®¾å®šè®¾è®¡ç¨¿<code>html</code>çš„<code>fontSize = 75px</code>ï¼Œåˆ™<code>1rem = 75px</code>(åˆ†æˆ10ä»½)ï¼Œä½“ç°åœ¨<code>postCss-px2rem</code>ä¸­å°±æ˜¯<code>remUnit: 75</code>ã€‚è¿™æ—¶åœ¨ä»£ç ä¸­å†™<code>1px</code>ï¼Œä»£ç ç¼–è¯‘åä¼šè½¬æ¢æˆ<code> 1/75 = 0.01333rem</code>ï¼Œè€Œè¿™ä¸ª<code>0.01333rem</code>æ˜¯ç›¸å¯¹äºç§»åŠ¨ç«¯å±å¹•çš„ï¼Œ</p>
<p>ä¸¾ä¸ªä¾‹å­ï¼šå¦‚æœç§»åŠ¨ç«¯å±å¹•ä¸º<code>375px</code>ï¼Œä¸”æˆ‘ä»¬å¯¹ç§»åŠ¨ç«¯ç½‘é¡µçš„<code>html</code>è®¾ç½®äº†<code>fontSize = 375 / 10 = 37.5px</code>ï¼Œåˆ™<code>0.013333rem = 37.5 * 0.013333 = 0.5px</code>ï¼Œå…¶æ¯”ä¾‹å’Œè®¾è®¡ç¨¿æ˜¯ä¸€è‡´çš„ï¼Œæ‰€ä»¥æ˜¾ç¤ºåœ¨å±å¹•ä¸­ä¹Ÿå°±æ˜¯æ­£å¸¸çš„ã€‚</p>
<p>è®¾ç½®<code>font-size</code>çš„ä»£ç å¦‚ä¸‹ï¼ˆå¼•å…¥çš„æ–¹å¼æŒ‰éœ€è€Œå®šï¼Œæ¯”å¦‚è¿™æ®µä»£ç å¯ä»¥é€šè¿‡ä¸€ä¸ª<code>script</code>æ ‡ç­¾å†…è”åœ¨<code>app.html</code>ï¼‰ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> width = <span class="built_in">document</span>.documentElement.clientWidth;</span><br><span class="line"><span class="keyword">const</span> html = <span class="built_in">document</span>.getElementByTagName(<span class="string">&#x27;html&#x27;</span>)[<span class="number">0</span>];</span><br><span class="line">html.style.fontSize = width / <span class="number">10</span> + <span class="string">&#x27;px&#x27;</span>;</span><br></pre></td></tr></table></figure>


<p>é…ç½®<code>postCss-px2rem</code>ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// postcss.config.js</span></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    <span class="attr">plugins</span>: &#123;</span><br><span class="line">        <span class="attr">autoprefixer</span>: &#123;&#125;,</span><br><span class="line">        <span class="string">&#x27;postcss-px2rem&#x27;</span>: &#123;</span><br><span class="line">            <span class="attr">remUnit</span>: <span class="number">75</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>



<h3 id="3-3ã€vw-px2remé€‚é…æ–¹æ¡ˆ"><a href="#3-3ã€vw-px2remé€‚é…æ–¹æ¡ˆ" class="headerlink" title="3.3ã€vw+px2remé€‚é…æ–¹æ¡ˆ"></a>3.3ã€<code>vw+px2rem</code>é€‚é…æ–¹æ¡ˆ</h3><p>åœ¨ç§»åŠ¨ç«¯é€‚é…å‘å±•çš„åˆæœŸï¼Œæµè§ˆå™¨å¯¹<code>vw</code>çš„å…¼å®¹æ€§ç›¸æ¯”äº<code>rem</code>æ˜¯å·®å¾ˆå¤šçš„ï¼Œä½†æ˜¯éšç€æµè§ˆå™¨çš„å‘å±•ï¼Œæ…¢æ…¢åœ°å¯¹<code>vw</code>çš„å…¼å®¹ç›¸æ¯”äºä»¥å‰æœ‰äº†å¤©ç¿»åœ°è¦†çš„å˜åŒ–</p>
<p>å›æƒ³<code>rem</code>é€‚é…ï¼Œè‹¥æ˜¯å°†è®¾è®¡ç¨¿åˆ†æˆ100ä»½çš„æ—¶å€™ï¼Œå…¶å®<code>1rem</code>ä¹Ÿå°±å¯¹åº”äº†<code>1vw</code>ï¼Œä¸¤è€…çš„åŸç†æ˜¯å·®ä¸å¤šçš„ï¼Œ<code>vw</code>çš„å¥½å¤„å°±ä½“ç°åœ¨å…¶ä¸å†éœ€è¦å¼•å…¥<code>js</code>ï¼Œç›´æ¥é€šè¿‡cssä»£ç ä¾¿å¯ä»¥è®¾ç½®ï¼Œ</p>
<p>ä»£ç å¦‚ä¸‹ï¼š</p>
<img src="/images/viewport/11.png" width = "600" alt="1" align=center />

<p>å…¶ä¸­ï¼Œè¿˜æ˜¯å°†è®¾è®¡ç¨¿åˆ†æˆäº†åä»½ï¼Œå¦‚æœè®¾è®¡ç¨¿ä¸º<code>1080px</code>ï¼Œåˆ™ä¸€ä»½ä¸º<code>108</code>åƒç´ ï¼Œæ³¨æ„ï¼Œè¿™ä¸¤ä¸ªå€¼æ˜¯é€šè¿‡è‡ªå·±å»è®¾ç½®çš„ï¼Œå¹¶ä¸æ˜¯ä¸€å®šè¦è¿™æ ·è®¾ç½®ï¼Œå¯ä»¥æ ¹æ®è®¾è®¡ç¨¿ä»¥åŠè‡ªå·±æ–¹ä¾¿è®¡ç®—æ¥è®¾ç½®ï¼›</p>
<p>è®¾è®¡ç¨¿çš„<code>html fontSize</code>è®¾è®¡æˆ<code>1/10</code>çš„è®¾è®¡ç¨¿å®½åº¦<code>108</code>ï¼Œæ‰€ä»¥<code>postCss-px2rem</code>ä¸­çš„<code>remUnit</code>å°±ä¸º<code>108</code>ï¼Œç›¸åº”çš„ç§»åŠ¨ç«¯é¡µé¢ä¸­<code>1rem = 10vw</code>ï¼Œç›¸å½“äºåœ¨<code>375</code>çš„å±å¹•ä¸­<code>1rem = 37.5px</code>ã€‚</p>
<p>åŒæ—¶ï¼Œä¹Ÿå¯ä»¥åˆ©ç”¨<code>px2rem</code>å·¥å…·ï¼Œå†™ä»£ç æ—¶å°±å¯ä»¥ç›´æ¥åˆ©ç”¨<code>px</code>ã€‚</p>
<p><strong><u>å‚è€ƒæ–‡ç« ï¼š</u></strong></p>
<p><strong>viewport</strong></p>
<p><a target="_blank" rel="noopener" href="https://www.quirksmode.org/mobile/viewports.html">A tale of two viewports â€” part one</a></p>
<p><a target="_blank" rel="noopener" href="https://www.quirksmode.org/mobile/viewports2.html">A tale of two viewports â€” part t</a></p>
<p><a target="_blank" rel="noopener" href="https://www.quirksmode.org/mobile/metaviewport/">Meta viewport</a></p>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/2050/p/3877280.html">ç§»åŠ¨å‰ç«¯å¼€å‘ä¹‹viewportçš„æ·±å…¥ç†è§£</a></p>
<p><strong>ç§»åŠ¨ç«¯é€‚é…</strong></p>
<p><a target="_blank" rel="noopener" href="https://github.com/amfe/article/issues/17">ä½¿ç”¨Flexibleå®ç°æ‰‹æ·˜H5é¡µé¢çš„ç»ˆç«¯é€‚é…</a></p>
<p><a target="_blank" rel="noopener" href="https://juejin.im/entry/5a9d07ee6fb9a028c149f55b">å†èŠç§»åŠ¨ç«¯é¡µé¢çš„é€‚é…</a></p>
</p>
      <div class="post-button"><a class="btn" href="/2021/05/08/viewport/" rel="noopener"><i class="fa fa-angle-double-right fa-fw"></i>Read More</a></div>
    </div>
  </div>
  <div class="lx-entry padding">
    <div>
      <h2 class="title"><a href="/2021/05/07/h5-bg-animation/">H5èƒŒæ™¯åŠ¨æ•ˆå®ç°æ–¹æ¡ˆæ€»ç»“</a></h2>
      <span class="lx-post-detail"><i class="fa fa-calendar-o"></i> 2021-05-07</span>
      <p><h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>é€šå¸¸æ¥è¯´ï¼Œä¸€ä¸ªå…ƒç´ ï¼ŒåŠ¨å¾€å¾€æ¯”é™æ›´èƒ½å¸å¼•ç”¨æˆ·çœ¼çƒã€‚é’ˆå¯¹äºH5é¡µé¢çš„èƒŒæ™¯ï¼Œç‚«é…·çš„èƒŒæ™¯åŠ¨ç”»ç‰¹æ•ˆèƒ½å®šå‘åŠ©åŠ›ä¼ æ’­å’Œå“ç‰Œæ‰“é€ ã€‚æœ¬æ–‡å°†ä»‹ç»å‡ ç§å¸¸è§çš„H5ä¸­èƒŒæ™¯åŠ¨æ•ˆçš„åˆ¶ä½œæ‰‹æ³•ã€‚</p>
<h2 id="ä¸€ã€GIF"><a href="#ä¸€ã€GIF" class="headerlink" title="ä¸€ã€GIF"></a>ä¸€ã€GIF</h2><p><code>gif</code>å›¾ç‰‡æ“…é•¿äºåˆ¶ä½œå¾ªç¯çš„å°åŠ¨ç”»ï¼Œä½¿ç”¨<code>gif</code>æœ‰ä»¥ä¸‹å‡ ä¸ªæ¡ä»¶ï¼š</p>
<pre><code>1. åŠ¨ç”»æ˜¯å¾ªç¯çš„ï¼Œé¦–å°¾ç›¸æ¥
2. æ¯æ¬¡å¾ªç¯çš„æ—¶é—´å¿…é¡»è¦çŸ­ï¼Œå¦åˆ™gifçš„èµ„æºä¼šå¾ˆå¤§ï¼Œå½±å“é¡µé¢çš„åŠ è½½é€Ÿåº¦
</code></pre>
<p>æ¥çœ‹ä¸€ä¸ªOPPOå¼€å‘è€…å¤§ä¼šçš„ä¾‹å­ï¼š<a target="_blank" rel="noopener" href="https://open.oppomobile.com/odc20/mobile/">https://open.oppomobile.com/odc20/mobile/</a></p>
<img src="/images/h5-bg-animation/1.gif" width = "300" alt="1" align=center />

<p>åé¢çš„èƒŒæ™¯åŠ¨æ•ˆå…·ä½“ä»£ç å¦‚ä¸‹ï¼š</p>
<img src="/images/h5-bg-animation/2.png" width = "800" alt="1" align=center />

<p><code>img</code>ä¸­çš„<code>src</code>æŒ‡å‘äº†ä¸€ä¸ª<code>gif</code>ã€‚</p>
<p>è¿™ä¸ª<code>gif</code>ä½“ç§¯å¤§å°ä¸º<code>1.8M</code>ï¼Œæ—¶é•¿ä¸º<code>1s</code>ã€‚</p>
<p>å¯ä»¥çœ‹åˆ°ï¼Œè™½ç„¶åªæœ‰<code>1s</code>çš„<code>gif</code>ï¼Œä½†ä½“ç§¯å¤§å°å·²ç»åˆ°äº†<code>1.8M</code>ï¼Œé’ˆå¯¹äºH5é¡µé¢æ¥è¯´å·²ç»æŒºå¤§äº†ã€‚</p>
<p>æ‰€ä»¥ï¼Œè‹¥ä¸æ˜¯ç®€çŸ­çš„å¾ªç¯åŠ¨ç”»ï¼Œä¸æ¨èä½¿ç”¨<code>gif</code>æ–¹æ¡ˆã€‚å¹¶ä¸”ï¼Œåœ¨è®¾è®¡åŠ¨æ•ˆæ—¶ï¼Œéœ€è¦ä¸ç¾æœ¯åŒå­¦æ²Ÿé€šå¥½ï¼Œ<br>ä¸èƒ½è®©å…¶éšæ„å‘æŒ¥ï¼Œä¸ç„¶å¯èƒ½æœ€åæ‹¿åˆ°çš„<code>gif</code>èµ„æºè¿‡å¤§ï¼Œå¯¼è‡´è¯¥æ–¹æ¡ˆè¡Œä¸é€šã€‚</p>
<p><strong>å…³é”®ç‚¹ï¼šå¾ªç¯ï¼Œç®€çŸ­ï¼Œä½“ç§¯å°ï¼Œæ—¶é—´çŸ­ã€‚</strong></p>
<p><strong>ä¼˜ç‚¹ï¼šå®ç°ç®€å•ï¼ŒåŠ¨ç”»æ•ˆæœç»†è…»</strong></p>
<p><strong>ç¼ºç‚¹ï¼šé™åˆ¶è¾ƒå¤šï¼Œèµ„æºè¾ƒå¤§ï¼Œå½±å“é¡µé¢æ€§èƒ½</strong></p>
<h2 id="äºŒã€å¸§åŠ¨ç”»"><a href="#äºŒã€å¸§åŠ¨ç”»" class="headerlink" title="äºŒã€å¸§åŠ¨ç”»"></a>äºŒã€å¸§åŠ¨ç”»</h2><p>å¸§åŠ¨ç”»çš„è®¾è®¡æœ‰å¦‚ä¸‹ä¸¤ç§ï¼ŒåŸºæœ¬åŸç†æ˜¯ä¸€è‡´çš„ï¼š</p>
<ol>
<li>é€šè¿‡ä¸€å¼ å¼ å›¾ç‰‡åˆ‡æ¢å®ç°åŠ¨ç”»æ•ˆæœã€‚åœ¨<code>vue</code>æ¡†æ¶ä¸­ï¼Œå°±å¯ä»¥å…ˆåŠ è½½å¥½å›¾ç‰‡ï¼Œç„¶ååˆ©ç”¨<code>v-show</code>è¿›è¡Œå›¾ç‰‡åˆ‡æ¢</li>
<li>å°†é€å¸§å›¾ç‰‡æ”¾åˆ°ä¸€å¼ é•¿å›¾ä¸­ï¼Œåˆ©ç”¨<code>css</code>æ§åˆ¶å›¾ç‰‡å±•ç¤ºçš„ä½ç½®ï¼Œæ¥å®ç°åŠ¨ç”»çš„æ•ˆæœï¼Œè¿™ç§æ–¹æ¡ˆéœ€è¦è®¾è®¡é…åˆè¾“å‡ºä¸€å¼ å¸§åŠ¨ç”»é•¿å›¾</li>
</ol>
<h4 id="1ã€åˆ‡æ¢å›¾ç‰‡å®ç°"><a href="#1ã€åˆ‡æ¢å›¾ç‰‡å®ç°" class="headerlink" title="1ã€åˆ‡æ¢å›¾ç‰‡å®ç°"></a>1ã€åˆ‡æ¢å›¾ç‰‡å®ç°</h4><img src="/images/h5-bg-animation/3.gif" width = "300" alt="3" align=center />

<p>ä»¥ä¸ŠæŸæ¬¡æ´»åŠ¨çš„æ•ˆæœ<code>gif</code>å›¾ï¼Œå›¾ä¸­é—ªç”µæ•ˆæœä»¥åŠæ‰‹æœºè½¬åŠ¨æ•ˆæœå‡æ˜¯åˆ©ç”¨åˆ‡æ¢å›¾ç‰‡æ¥å®ç°çš„å¸§åŠ¨ç”»ã€‚</p>
<p>æ‹¿é—ªç”µæ•ˆæœä¸¾ä¾‹ï¼š</p>
<ul>
<li>ç´ ææœ‰ä»¥ä¸‹4å¼ å›¾ç‰‡</li>
</ul>
<img src="/images/h5-bg-animation/4.png" width = "100" alt="4" align=center />
<img src="/images/h5-bg-animation/5.png" width = "100" alt="4" align=center />
<img src="/images/h5-bg-animation/6.png" width = "100" alt="4" align=center />
<img src="/images/h5-bg-animation/7.png" width = "100" alt="4" align=center />


<ul>
<li>åœ¨é¡µé¢å¯åŠ¨æ—¶ï¼Œå¯ä»¥åœ¨é¡µé¢ä¸­åˆ›å»º6ä¸ª<code>img</code>æ ‡ç­¾ï¼Œå¹¶å°†å„ä¸ªå›¾ç‰‡çš„åœ°å€èµ‹å€¼ç»™å„ä¸ª<code>img</code>çš„<code>src</code>å±æ€§ï¼Œ<br>å¹¶ä¸”è¿™å‡ ä¸ª<code>img</code>çš„<code>display</code>éƒ½ä¸º<code>none</code>ï¼Œä¸å±•ç¤ºï¼ˆä¹Ÿå¯ä»¥å±•ç¤ºç¬¬ä¸€å¼ ä½œä¸ºè¿‡æ¸¡ï¼Œç­‰æ‰€æœ‰å›¾ç‰‡åŠ è½½å‡ºæ¥åå†å¼€å§‹æ‰§è¡ŒåŠ¨ç”»ï¼‰</li>
<li>é€šè¿‡<code>setInterval</code>å‡½æ•°ï¼Œæ§åˆ¶å¥½å›¾ç‰‡å±•ç¤ºçš„æ—¶é—´ä»¥åŠåˆ‡æ¢ï¼Œä¾¿å¯å®ç°åŠ¨ç”»æ•ˆæœã€‚</li>
</ul>
<h4 id="2ã€é•¿å›¾æ»‘åŠ¨å›¾ç‰‡å®ç°"><a href="#2ã€é•¿å›¾æ»‘åŠ¨å›¾ç‰‡å®ç°" class="headerlink" title="2ã€é•¿å›¾æ»‘åŠ¨å›¾ç‰‡å®ç°"></a>2ã€é•¿å›¾æ»‘åŠ¨å›¾ç‰‡å®ç°</h4><img src="/images/h5-bg-animation/10.png" width = "300" alt="4" align=center />



<p>ä¸Šå›¾çš„åŠ¨ç”»æ•ˆæœæ˜¯åˆ©ç”¨ä¸€å¼ ç­‰é—´è·çš„åŠ¨ç”»åˆ†è§£é€å¸§å›¾ç‰‡ï¼ˆç±»ä¼¼é›ªç¢§å›¾ï¼‰ï¼Œç”±<code>js</code>è„šæœ¬æ¨¡æ‹Ÿç¼–å†™æˆ–æ˜¯ä½¿ç”¨<code>css3</code>æ–°å±æ€§<code>step()</code>åˆ¶ä½œè€Œæˆçš„ã€‚</p>
<p><code>step()</code>åœ¨ç§»åŠ¨ç«¯çš„å…¼å®¹æ€§æ˜¯å¾ˆå¥½çš„ï¼Œä½†ä½¿ç”¨æ¯”è¾ƒå°ä¼—ã€‚é€å¸§åŠ¨ç”»å’Œ<code>GIF</code>åŠ¨ç”»çš„å·®åˆ«åœ¨äºï¼Œ<br>è„šæœ¬å¯ä»¥æ§åˆ¶é€å¸§åŠ¨ç”»çš„å¿«æ…¢å’ŒåŠ¨ä½œçš„æš‚åœï¼Œè€Œ<code>GIF</code>åŠ¨ç”»æ— æ³•åœ¨åæœŸé€šè¿‡ä»£ç è¿›è¡ŒåŠ¨ç”»é€Ÿç‡åŠé€æ˜åº¦çš„ä¿®æ”¹ã€‚</p>
<p>ä»¥ä¸‹æ˜¯<code>CSS</code>ä»£ç çš„å®ç°ï¼š</p>
<img src="/images/h5-bg-animation/11.png" width = "500" alt="4" align=center />

<p>é€šè¿‡<code>animation</code>å±æ€§æ§åˆ¶èƒŒæ™¯å›¾ç‰‡å±•ç¤ºçš„ä½ç½®æ¥å®ç°å¸§åŠ¨ç”»æ•ˆæœã€‚</p>
<p>ä»¥ä¸Šä¸¤ç§æ–¹æ¡ˆéƒ½éœ€è¦æ‰‹å¤´æœ‰å¸§åŠ¨ç”»çš„é€å¸§å›¾ç‰‡ï¼Œè‹¥æ‰‹ä¸Šåªæœ‰è®¾è®¡å¸ˆç»™çš„åŠ¨ç”»æ•ˆæœè§†é¢‘æ€ä¹ˆåŠï¼Ÿ</p>
<p>è¿™é‡Œæœ‰ä¸€ä¸ªä¸é”™çš„ç½‘ç«™æ¨èç»™å¤§å®¶ï¼š<a target="_blank" rel="noopener" href="https://www.img2go.com/convert-to-jpg%EF%BC%88%E5%82%BB%E7%93%9C%E5%BC%8F%E8%A7%86%E9%A2%91%E8%BD%AC%E5%B8%A7%E5%8A%A8%E7%94%BB%E5%9B%BE%E7%89%87%E5%B7%A5%E5%85%B7%EF%BC%89">https://www.img2go.com/convert-to-jpgï¼ˆå‚»ç“œå¼è§†é¢‘è½¬å¸§åŠ¨ç”»å›¾ç‰‡å·¥å…·ï¼‰</a></p>
<p><strong>ä¼˜ç‚¹ï¼šå…¼å®¹æ€§å¥½ï¼Œå®ç°éš¾åº¦ä¸é«˜</strong></p>
<p><strong>ç¼ºç‚¹ï¼šèµ„æºè¾ƒå¤§å½±å“æ€§èƒ½ï¼ŒåŠ¨ç”»å¯èƒ½ä¸å¤Ÿç»†è…»</strong></p>
<h2 id="ä¸‰ã€SVG"><a href="#ä¸‰ã€SVG" class="headerlink" title="ä¸‰ã€SVG"></a>ä¸‰ã€SVG</h2><img src="/images/h5-bg-animation/12.gif" width = "300" alt="4" align=center />

<p>ä¸Šå›¾æ˜¯<code>SVG</code>å®ç°çš„ä¸€ä¸ªç®€å•çš„èƒŒæ™¯åŠ¨æ•ˆï¼Œå…·ä½“çš„å®ç°éš¾åº¦ä¸åŠ¨ç”»çš„å¤æ‚ç¨‹åº¦æœ‰å…³ï¼Œ<br>æœ‰å…´è¶£çš„åŒå­¦å¯ä»¥è¿›ä¸€æ­¥ç ”ç©¶<code>SVG</code>åŠ¨ç”»ï¼š<a target="_blank" rel="noopener" href="https://aotu.io/notes/2017/01/22/snapsvg/index.html">https://aotu.io/notes/2017/01/22/snapsvg/index.html</a></p>
<p><code>SVG</code>åŠ¨ç”»æ•ˆæœä»¥çº¿æ¡ã€å½¢çŠ¶å˜åŒ–ä¸ºä¸»ï¼Œéœ€è¦æ ¹æ®å…·ä½“çš„åœºæ™¯æ¥å†³ç­–æ˜¯å¦è¦ä½¿ç”¨<code>svg</code>è¿›è¡Œå®ç°ã€‚</p>
<p><strong>ä¼˜ç‚¹ï¼šå…¼å®¹æ€§å¥½ï¼Œæ€§èƒ½ä½³</strong></p>
<p><strong>ç¼ºç‚¹ï¼šå®ç°å¤æ‚</strong></p>
<h2 id="å››ã€video"><a href="#å››ã€video" class="headerlink" title="å››ã€video"></a>å››ã€video</h2><p>ä½¿ç”¨<code>video</code>æ ‡ç­¾æ¥è®¾ç½®èƒŒæ™¯çš„å¥½å¤„å°±åœ¨äºï¼šå¯ä»¥ç›´æ¥å¼•å…¥è§†é¢‘ï¼Œä¸”æ— éœ€è¿‡å¤šçš„ä»£ç è®¾è®¡ï¼Œç®€å•ç²—æš´ã€‚<br>ä½†ç”±äºH5ç«¯å„ä¸ªæµè§ˆå™¨ä»¥åŠå¹³å°å¯¹videoæ ‡ç­¾çš„å¤„ç†ä¸å°½ç›¸åŒï¼Œä¸”æ— æ³•è‡ªåŠ¨æ’­æ”¾ï¼Œè¿˜æœ‰å¯èƒ½è¢«æµè§ˆå™¨æ‹¦æˆªï¼Œ<br>æ‰€ä»¥<code>video</code>æ ‡ç­¾ä½œä¸ºèƒŒæ™¯åœ¨PCç«¯ä¸Šä½¿ç”¨å¾—æ›´å¤šï¼ŒH5ç«¯è¦ä½¿ç”¨çš„è¯å¿…é¡»è¦å¹³å°æ”¯æŒ<code>video</code>æ ‡ç­¾è‡ªåŠ¨æ’­æ”¾ã€‚</p>
<p>æ¯”å¦‚åœ¨å„ä¸ªæ‰‹æœºç«¯çš„æµè§ˆå™¨ä¸­åŸºæœ¬ä¸Šæ˜¯æ— æ³•è‡ªåŠ¨æ’­æ”¾çš„ï¼Œè€Œåœ¨åº”ç”¨å•†åº—æˆ–è€…æŸäº›å¹³å°çš„<code>webView</code>ä¸­ï¼Œ<br>æ˜¯å¯ä»¥è®¾ç½®videoè‡ªåŠ¨æ’­æ”¾ï¼Œæ­¤æ—¶å°±èƒ½ä½¿ç”¨<code>video</code>æ ‡ç­¾ä½œä¸ºèƒŒæ™¯ï¼Œå¼•å…¥ä¸€ä¸ªè§†é¢‘ï¼Œä½¿ç”¨æ–¹æ³•ä¹Ÿå¾ˆç®€å•ï¼š<br>è®¾ç½®ä¸€ä¸ª<code>video</code>æ ‡ç­¾ï¼Œé…ç½®ä¸€äº›ç›¸åº”çš„å±æ€§å³å¯ã€‚<br>videoæ ‡ç­¾çš„mdnæ–‡æ¡£ï¼š<a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/HTML/Element/video">https://developer.mozilla.org/zh-CN/docs/Web/HTML/Element/video</a></p>
<p><strong>ä¼˜ç‚¹ï¼šå®ç°ç®€å•</strong></p>
<p><strong>ç¼ºç‚¹ï¼šH5ä¸Šå¯¹è‡ªåŠ¨æ’­æ”¾çš„å…¼å®¹æ€§å·®ï¼Œæ— æ³•è‡ªåŠ¨æ’­æ”¾æ—¶ä¾¿æ— æ³•ä½¿ç”¨æ­¤æ–¹æ³•è¿›è¡Œå®ç°</strong></p>
<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>ä¸Šè¿°ç®€å•æ€»ç»“é˜è¿°äº†å››ç§èƒŒæ™¯åŠ¨æ•ˆçš„å®ç°æ–¹æ¡ˆï¼Œåˆ†åˆ«æ˜¯<code>gif</code>ã€<code>é€å¸§åŠ¨ç”»</code>ã€<code>SVG</code>ã€<code>video</code>ï¼Œæ¯ç§æ–¹æ¡ˆéƒ½æœ‰å…¶ç›¸åº”çš„ä¼˜ç¼ºç‚¹ï¼Œå…·ä½“çš„ä½¿ç”¨éœ€è¦æ ¹æ®å…·ä½“åœºæ™¯å»åˆ†æã€‚</p>
<p>åœ¨åˆ¶ä½œèƒŒæ™¯åŠ¨æ•ˆçš„è¿‡ç¨‹ä¸­ä½œä¸ºå¼€å‘äººå‘˜æœ‰ä»¥ä¸‹å‡ ç‚¹éœ€è¦æ³¨æ„ï¼š</p>
<ul>
<li>æœ‰é—®é¢˜åŠæ—¶ä¸è®¾è®¡å¸ˆæ²Ÿé€šï¼Œæ•ˆæœæ— æ³•å®ç°çš„æ—¶å€™å°è¯•ä¸è®¾è®¡å¸ˆæ¢è®¨Bæ–¹æ¡ˆï¼Œæ¯”å¦‚æ¢ç”¨ä¸€ç§æ•ˆæœï¼Œæˆ–è€…ä»¥å¯ä»¥å®ç°çš„æ•ˆæœå¹³ç¼“è¿‡æ¸¡ï¼Œä¿è¯ç”¨æˆ·ä½“éªŒçš„åŒæ—¶ä¸ä¼šä¸¥é‡å½±å“è§†è§‰æ•ˆæœ</li>
<li>åœ¨è®¾è®¡å¸ˆå‡ºå®Œè®¾è®¡åŠ¨æ•ˆä¹‹åï¼Œå¿…é¡»è¿›è¡Œè¯„å®¡ï¼Œæ˜ç¡®é€šçŸ¥äº§å“ä»¥åŠè®¾è®¡å¸ˆå“ªäº›æ•ˆæœå¯ä»¥åšï¼Œå“ªäº›æ•ˆæœåšèµ·æ¥æˆæœ¬ä¼šå¾ˆé«˜ï¼Œä»é¡¹ç›®åˆæœŸå°±ç¡®å®šå¥½æ•´ä½“çš„æ•ˆæœä»¥åŠå®ç°æ–¹æ¡ˆã€‚è¿™æ ·åšæ˜¯ä¸ºäº†åç»­ä¿è¯é¡¹ç›®è´¨é‡ä»¥åŠä¸ä¼šå› ä¸ºåŠ¨æ•ˆå®ç°éš¾è€Œå¯¼è‡´å»¶æœŸæˆ–è€…ä¸åš</li>
<li>å…·ä½“çš„åŠ¨æ•ˆä¹Ÿéœ€è¦æ ¹æ®å…·ä½“çš„åœºæ™¯è¿›è¡Œåˆ†æï¼Œè¿™å°±è¦æ±‚å¼€å‘äººå‘˜éœ€è¦æœ‰è¶³å¤Ÿçš„åŠ¨æ•ˆè®¾è®¡å¼€å‘ç»éªŒï¼Œå¯¹æ‰€éœ€è¦åšçš„åŠ¨æ•ˆå¿ƒé‡Œæœ‰ä¸ªå°ºåº¦</li>
</ul>
</p>
      <div class="post-button"><a class="btn" href="/2021/05/07/h5-bg-animation/" rel="noopener"><i class="fa fa-angle-double-right fa-fw"></i>Read More</a></div>
    </div>
  </div>
  <div class="lx-entry padding">
    <div>
      <h2 class="title"><a href="/2021/05/05/okr-record/">OKRé˜…è¯»å¿ƒå¾—</a></h2>
      <span class="lx-post-detail"><i class="fa fa-calendar-o"></i> 2021-05-05</span>
      <p><h3 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h3><p><code>OKR</code>å…¨ç§°æ˜¯<code>Objective and key results</code>ï¼Œç›®æ ‡ä¸<code>**å…³é”®ç»“æœæ³•**</code>ã€‚</p>
<p>å®ƒå…³æ³¨<code>ç›®æ ‡</code>ï¼Œæ˜¯ä¸€å¥—å®šä¹‰å’Œè·Ÿè¸ªç›®æ ‡åŠå…¶å®Œæˆæƒ…å†µçš„ç®¡ç†å·¥å…·å’Œæ–¹æ³•ã€‚<u>ç›®æ ‡æ˜¯æŒ‡ä½ æƒ³å®Œæˆä»€ä¹ˆäº‹æƒ…</u>ï¼›<u>å…³é”®ç»“æœæ˜¯ç¡®è®¤ä½ æ˜¯å¦åšåˆ°äº†è¿™ä»¶äº‹æƒ…</u>ï¼Œå³å…³é”®ç»“æœæ˜¯å¯¹äºç›®æ ‡å®ç°çš„é‡åŒ–ã€‚</p>
<p>ä½œè€…æœå°”è‡ªå·±å¤šå¹´æ¥ä½¿ç”¨<code>OKR</code>ï¼Œè¿˜åœ¨ä¸åŒè§„æ¨¡å’Œæ€§è´¨çš„ä¼ä¸šå’Œç»„ç»‡ä¸­æ¨å¹¿<code>OKR</code>ã€‚ä»–åœ¨æœ¬ä¹¦é‡Œä»‹ç»äº†å¦‚ä½•ä½¿ç”¨<code>OKR</code>ï¼Œå®ç°å¢é•¿ã€‚ä»–è¿˜é‚€è¯·åŒ…æ‹¬æ¯”å°”Â·ç›–èŒ¨ç­‰åœ¨å†…çš„<code>OKR</code>çš„å®è·µè€…ã€‚</p>
<p>ä»¥ç¬¬ä¸€äººç§°çš„æ–¹å¼ï¼Œè®²è¿°è‡ªå·±ä½¿ç”¨<code>OKR</code>çš„æ•…äº‹ï¼Œé€šè¿‡ç”ŸåŠ¨çš„æ¡ˆä¾‹ï¼Œå±•ç¤º<code>OKR</code>çš„åŠ›é‡ã€‚</p>
<h3 id="OKRä¸KPI"><a href="#OKRä¸KPI" class="headerlink" title="OKRä¸KPI"></a><code>OKR</code>ä¸<code>KPI</code></h3><p>å…¶å®ä¸€è¯´åˆ°ç»©æ•ˆè€ƒæ ¸ï¼Œå¤§å®¶å¯èƒ½é©¬ä¸Šå°±ä¼šæƒ³èµ·<code>KPI</code>ï¼Œä¹Ÿå°±æ˜¯å…³é”®ç»©æ•ˆæŒ‡æ ‡ã€‚è¿™ä¸¤ä¸ªå·¥å…·çš„åŒºåˆ«åœ¨å“ªå„¿å‘¢ï¼Ÿæœ€ç›´æ¥çš„åŒºåˆ«æ˜¯ï¼Œ<code>KPI</code>æœ‰æ˜ç¡®çš„è€ƒæ ¸æŒ‡æ ‡ï¼Œè·Ÿå¥–é‡‘æ¿€åŠ±æŒ‚é’©ï¼Œä½†æ˜¯<code>OKR</code>æ›´ä¾§é‡ç›®æ ‡ç®¡ç†ï¼Œ</p>
<p>è·Ÿå‡èŒåŠ è–ªæ²¡æœ‰ç›´æ¥å…³ç³»ã€‚<code>KPI</code>æ˜¯ä¸€ç§å‹åŠ›ç®¡ç†æ–¹æ³•ï¼Œèƒ½è®©ä½ ä¸ºäº†å®Œæˆè€ƒæ ¸æŒ‡æ ‡è€ŒåŸ‹å¤´å·¥ä½œï¼Œä½†ä½ æœ‰å¯èƒ½åªé¡¾å¾—ä¸Šå®ŒæˆæŒ‡æ ‡ï¼Œè€Œä¸ç®¡å®é™…æ•ˆæœã€‚<code>OKR</code>åˆ™æ˜¯ä¸€ç§æ„¿æ™¯ç®¡ç†æ–¹æ³•ï¼Œè®©ä½ å·¥ä½œæ—¶ä¸ä¼šåç¦»æ–¹å‘ï¼Œå–å¾—å®å®åœ¨åœ¨çš„è¿›æ­¥ã€‚</p>
<h3 id="OKRç‰¹ç‚¹"><a href="#OKRç‰¹ç‚¹" class="headerlink" title="OKRç‰¹ç‚¹"></a><code>OKR</code>ç‰¹ç‚¹</h3><p>å…³äº<code>OKR</code>çš„ä¸€äº›ç‰¹ç‚¹ï¼š</p>
<h4 id="åœ¨è®¾å®šOKRä¸Šï¼š"><a href="#åœ¨è®¾å®šOKRä¸Šï¼š" class="headerlink" title="åœ¨è®¾å®šOKRä¸Šï¼š"></a>åœ¨è®¾å®š<code>OKR</code>ä¸Šï¼š</h4><ul>
<li>è¦ä½¿ç›®æ ‡å…·æœ‰ä½¿å‘½æ„Ÿï¼Œæ„ä¹‰æ„Ÿï¼›</li>
<li>é‡è¦ä¸”å…·ä½“ï¼Œä»¥ç»“æœå¯¼å‘</li>
<li>å…³é”®ç»“æœæ˜ç¡®ï¼Œæœ‰æ—¶é—´èŠ‚ç‚¹</li>
<li>å…·æœ‰æŒ‘æˆ˜æ€§</li>
</ul>
<h4 id="OKRçš„å››å¤§åˆ©å™¨ï¼š"><a href="#OKRçš„å››å¤§åˆ©å™¨ï¼š" class="headerlink" title="OKRçš„å››å¤§åˆ©å™¨ï¼š"></a><code>OKR</code>çš„å››å¤§åˆ©å™¨ï¼š</h4><ul>
<li>è®©æ•´ä¸ªç»„ç»‡èšç„¦åœ¨é‡è¦çš„äº‹æƒ…ä¸Š</li>
<li>å¯¹è´£ä»»è¿›è¡Œè¿½è¸ª</li>
<li>ä¿ƒè¿›å›¢é˜Ÿçš„ååŒ</li>
<li>æŒ‘æˆ˜ä¸å¯èƒ½</li>
</ul>
<h4 id="OKRçš„ä½¿ç”¨ï¼š"><a href="#OKRçš„ä½¿ç”¨ï¼š" class="headerlink" title="OKRçš„ä½¿ç”¨ï¼š"></a><code>OKR</code>çš„ä½¿ç”¨ï¼š</h4><p>â€‹    <u>å›´ç»•CFRå±•å¼€ï¼ˆcomversation, feedback, recognitionï¼‰æ²Ÿé€šã€åé¦ˆã€è¯„ä»·</u></p>
<p><strong>Cï¼šæ²Ÿé€š</strong> - ä¸æ–­å›´ç»•ä¸€ä¸ªæ—¶é—´æ®µå†…çš„<code>OKR</code>è¿›è¡Œæ²Ÿé€šï¼Œæœ€ç»ˆè¾¾æˆå…±è¯†</p>
<p><strong>Fï¼šåé¦ˆ</strong> - æ ¹æ®<code>OKR</code>çš„è¿›è¡Œè¿›åº¦ä¸æ–­åé¦ˆï¼Œè¿½è¸ª<code>OKR</code>çš„è¿›å±•</p>
<p><strong>Rï¼šè¯„ä»·</strong> - å¯¹<code>OKR</code>çš„å…³é”®ç»“æœå®Œæˆæƒ…å†µè¯„ä»·ï¼Œæ‰“åˆ†å¹¶æ€»ç»“ã€‚</p>
<h3 id="é˜…è¯»ã€ŠOKRã€‹å¿ƒå¾—ä½“ä¼šï¼š"><a href="#é˜…è¯»ã€ŠOKRã€‹å¿ƒå¾—ä½“ä¼šï¼š" class="headerlink" title="é˜…è¯»ã€ŠOKRã€‹å¿ƒå¾—ä½“ä¼šï¼š"></a>é˜…è¯»ã€ŠOKRã€‹å¿ƒå¾—ä½“ä¼šï¼š</h3><p>åˆ¶å®šç›®æ ‡çš„è¿‡ç¨‹åº”è¯¥æä¸ºå°å¿ƒï¼Œä¸å¯è®©ç›®æ ‡å¤ªå®¹æ˜“å®ç°ï¼Œä¹Ÿä¸å¯è®©ç›®æ ‡è¿‡äºå®è¾¾å¯¼è‡´åœ¨è§„å®šçš„æ—¶é—´å†…æ— æ³•å®ç°è€Œäº§ç”Ÿæ‡ˆæ€ ï¼Œæ‰€ä»¥ç›®æ ‡çš„åˆ¶å®šæ˜¯<code>OKR</code>çš„éš¾ç‚¹ä¹‹ä¸€ã€‚<br>æ‰€åˆ¶å®šçš„ç›®æ ‡å¿…é¡»å…·æœ‰æŒ‘æˆ˜æ€§ï¼Œè€Œä¸æ˜¯æ—¥å¸¸åå¤çš„å·¥ä½œï¼Œæ˜¯éœ€è¦èµ°å‡ºèˆ’é€‚åŒºæ‰èƒ½å®ç°çš„ç›®æ ‡ã€‚</p>
<p>è¦å°å¿ƒåŒºåˆ«é‡è¦äº‹ä»¶å’Œç´§æ€¥äº‹ä»¶ï¼Œå¾ˆå¤šå®¹æ˜“å…ˆåšç´§æ€¥äº‹ä»¶ï¼Œè€Œä¸ç´§æ€¥çš„é‡è¦äº‹ä»¶ä¸€ç›´è¢«æ’åœ¨åé¢è€Œå¯¼è‡´æœ€ç»ˆæ²¡åŠæ³•å®Œæˆæ—¢å®šçš„ç›®æ ‡ã€‚å…¶å®å·¥ä½œä¸­å¾ˆå¤šè¿™æ ·çš„åœºæ™¯ï¼Œ<br>ä¸šåŠ¡éœ€æ±‚é¢‘ç¹å¯¼è‡´éœ€è¦æŠŠç²¾åŠ›å¤§éƒ¨åˆ†æ”¾ç½®äºä¸šåŠ¡éœ€æ±‚å½“ä¸­ï¼Œäºæˆ‘ç›®å‰è€Œè¨€ï¼Œæ˜¯å¥½äº‹ï¼Œåˆšæ¥æ‰‹è¿™ä¸€å·¥ä½œï¼Œæœ€é‡è¦çš„å°±æ˜¯ç†Ÿæ‚‰ä¸šåŠ¡ï¼Œè€Œç†Ÿæ‚‰ä¸šåŠ¡æœ€ç®€å•çš„æ–¹å¼å°±æ˜¯<br>å¤šåšéœ€æ±‚ã€‚ä½†æ˜¯å®ç°ä¸šåŠ¡éœ€æ±‚å¯¹ä¸ªäººçš„æå‡æ˜¯æœ‰ç“¶é¢ˆçš„ï¼Œå¯èƒ½ä¸€ä¸¤å¹´åï¼Œå¦‚æœæ²¡æœ‰è¡¥å……è‡ªå·±çš„çŸ¥è¯†é¢ï¼Œæ·±ç©¶æŠ€æœ¯åŸç†ï¼Œä»…åœç•™åœ¨å®ç°åŠŸèƒ½å±‚é¢ä¸Šçš„è¯ï¼Œä¾¿å¾ˆéš¾å†æœ‰æå‡ã€‚<br>æ‰€ä»¥ï¼Œè¦åˆç†åˆ†é…ç²¾åŠ›ï¼Œå¯¹ä¸šåŠ¡éœ€æ±‚ä¿è´¨ä¿é‡ï¼ŒåŒæ—¶é€šè¿‡å¯¹é‡è¦äº‹ä»¶çš„å®Œæˆï¼Œæå‡è‡ªå·±ï¼Œåå‘æ¨åŠ¨æå‡å·¥ä½œæ•ˆç‡ï¼Œä¸¤è€…ç›¸è¾…ç›¸æˆã€‚</p>
<p>ä¹¦ä¸­è¿˜æœ‰å…³äº<code>OKR</code>çš„ä¸€ç‚¹æˆ‘è§‰å¾—ååˆ†æœ‰ä»·å€¼ï¼Œå°±æ˜¯<code>OKR</code>æ˜¯ç›¸å½“é€æ˜çš„ï¼Œå…¬å¸ä¸Šä¸‹ä¹‹é—´ç›®æ ‡æ˜ç¡®ï¼Œæ¯ä¸ªäººéƒ½å¯ä»¥çœ‹åˆ°ä»»ä½•äººçš„<code>OKR</code>ï¼Œä¸€çº¿äººå‘˜å¯ä»¥ä¸æ–­è°ƒæ•´è‡ªå·±çš„<code>OKR</code>ä¸<br>å…¬å¸<code>OKR</code>å¯¹é½ï¼Œé€šè¿‡è‡ªå·±<code>OKR</code>çš„å®ç°ï¼Œæ¥æ¨åŠ¨å…¬å¸çš„<code>OKR</code>ï¼›è€ŒåŒäº‹ä¸åŒäº‹ä¹‹é—´ä¹Ÿèƒ½ç›¸äº’äº†è§£å¯¹æ–¹æ­£åœ¨åšä»€ä¹ˆäº‹æƒ…ï¼Œç›¸äº’é…åˆï¼Œäº’ç›¸ä¿ƒè¿›ã€‚è¿™å…¶å®æ˜¯å…±èµ¢çš„ï¼Œå…¬å¸æœ‰æå‡ï¼ŒèŒå‘˜ä¹Ÿæœ‰æå‡ã€‚</p>
</p>
      <div class="post-button"><a class="btn" href="/2021/05/05/okr-record/" rel="noopener"><i class="fa fa-angle-double-right fa-fw"></i>Read More</a></div>
    </div>
  </div>
  <div class="lx-entry padding">
    <div>
      <h2 class="title"><a href="/2021/05/03/orm/">ORMæ¡†æ¶</a></h2>
      <span class="lx-post-detail"><i class="fa fa-calendar-o"></i> 2021-05-03</span>
      <p><h2 id="ä¸€ã€ORMç®€ä»‹"><a href="#ä¸€ã€ORMç®€ä»‹" class="headerlink" title="ä¸€ã€ORMç®€ä»‹"></a>ä¸€ã€ORMç®€ä»‹</h2><p><code>ORM</code>ï¼ˆå¯¹è±¡å…³ç³»æ˜ å°„ï¼Œ<code>Object relational mapping</code>ï¼Œç®€ç§°<code>ORM</code>ï¼‰æ˜¯ä¸€ç§ä¸ºäº†è§£å†³ä¸šåŠ¡ä¸­å¯¹è±¡ä¸å…³ç³»æ•°æ®åº“ä¸åŒ¹é…çš„ç°è±¡è€Œæå‡ºçš„æ¡†æ¶æŠ€æœ¯ï¼Œ<code>ORM</code><br>é€šè¿‡ä½¿ç”¨æè¿°å¯¹è±¡å’Œæ•°æ®åº“ä¹‹é—´æ˜ å°„çš„å…ƒæ•°æ®ï¼Œå°†ä¸šåŠ¡é€»è¾‘ä¸­çš„å¯¹è±¡æŒä¹…åŒ–åˆ°å…³ç³»æ•°æ®åº“ä¸­ã€‚</p>
<pre><code>æŒä¹…åŒ–ï¼šæŒä¹…åŒ–æ˜¯å°†ç¨‹åºæ•°æ®åœ¨æŒä¹…çŠ¶æ€å’Œç¬æ—¶çŠ¶æ€é—´è½¬æ¢çš„æœºåˆ¶ï¼Œç¬æ—¶æ•°æ®æŒä¹…åŒ–ä¸ºæŒä¹…æ•°æ®ã€‚é€šä¿—æ˜“æ‡‚åœ°è®²å°±æ˜¯ï¼Œä¸šåŠ¡ä¸­å¤„ç†çš„å¯¹è±¡æ•°æ®å‘ç”Ÿæ”¹å˜ï¼Œ
</code></pre>
<p>éœ€è¦å°†å…¶åŒæ­¥åˆ°æ•°æ®åº“ä¸­ä¿å­˜ï¼Œå³<code>æŒä¹…åŒ–</code>ã€‚ï¼ˆæ¯”å¦‚å†…å­˜ä¸­çš„æ•°æ®ï¼Œæ˜¯ä¸èƒ½æ°¸ä¹…ä¿å­˜çš„ï¼ŒæŒä¹…åŒ–è‡³æ•°æ®åº“ä¸­ï¼Œèƒ½å¤Ÿé•¿ä¹…ä¿å­˜ï¼‰</p>
<p>å®ç°æŒä¹…åŒ–æœ€åŸºæœ¬çš„æ–¹å¼å°±æ˜¯ç¡¬ç¼–ç ï¼šä¸ºæ¯ä¸€ç§å¢åˆ æ”¹æŸ¥çš„éœ€æ±‚å†™ç›¸åº”çš„ä»£ç ã€‚å¯æƒ³è€ŒçŸ¥ï¼Œè¿™ç§æ–¹å¼å­˜åœ¨å¾ˆå¤šä¸è¶³çš„åœ°æ–¹ï¼š</p>
<ul>
<li><p>ç¼ºä¹å¼¹æ€§ï¼Œä¸€æ—¦ä¸šåŠ¡éœ€æ±‚å‘ç”Ÿå˜æ›´ï¼Œå°±å¿…é¡»ä¿®æ”¹ä»£ç ï¼Œæ‰©å±•æ€§ä»¥åŠå¯ç»´æŠ¤æ€§å·®ï¼›</p>
</li>
<li><p>é’ˆå¯¹äºæ¯ä¸€ç§æŒä¹…åŒ–éœ€æ±‚ï¼Œéƒ½éœ€è¦å†™ç›¸åº”çš„ä»£ç ï¼Œä½†å¾ˆå¤§ä¸€éƒ¨åˆ†ä»£ç éƒ½æ˜¯é‡å¤çš„ï¼›</p>
</li>
</ul>
<p>é’ˆå¯¹äºä»¥ä¸Šé—®é¢˜ï¼Œ<code>ORM</code>æ¡†æ¶å°±è¢«æå‡ºæ¥ã€‚<code>ORM</code>ä½œä¸ºä¸šåŠ¡å¤„ç†å¯¹è±¡ä¸æ•°æ®åº“è¿æ¥çš„æ¡¥æ¢ï¼Œé€šè¿‡å¯¹è±¡çš„è¯­æ³•ï¼Œå®Œæˆå…³ç³»å‹æ•°æ®åº“çš„æ“ä½œæŠ€æœ¯ã€‚</p>
<p><code>ORM</code> æŠŠæ•°æ®åº“æ˜ å°„æˆå¯¹è±¡ã€‚</p>
<ul>
<li><p>æ•°æ®åº“çš„è¡¨ï¼ˆ<code>table</code>ï¼‰ â€“&gt; ç±»ï¼ˆ<code>class</code>ï¼‰</p>
</li>
<li><p>è®°å½•ï¼ˆ<code>record</code>ï¼Œè¡Œæ•°æ®ï¼‰â€“&gt; å¯¹è±¡ï¼ˆ<code>object</code>ï¼‰</p>
</li>
<li><p>å­—æ®µï¼ˆ<code>field</code>ï¼‰â€“&gt; å¯¹è±¡çš„å±æ€§ï¼ˆ<code>attribute</code>ï¼‰</p>
</li>
</ul>
<p>ä¸¾ä¸ªä¾‹å­ï¼š</p>
<p>sqlæŸ¥è¯¢è¯­å¥å¦‚ä¸‹ï¼Œ</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> id, first_name, last_name, phone, birth_date, sex</span><br><span class="line"><span class="keyword">FROM</span> persons</span><br><span class="line"><span class="keyword">WHERE</span> id <span class="operator">=</span> <span class="number">10</span></span><br></pre></td></tr></table></figure>

<p>ä¸šåŠ¡é€»è¾‘ä¸­æ“ä½œæ•°æ®åº“ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">res = db.execSql(sql);</span><br><span class="line">name = res[<span class="number">0</span>][<span class="string">&#x27;FIRST_NAME&#x27;</span>];</span><br></pre></td></tr></table></figure>

<p>æ”¹ç”¨<code>ORM</code>æ¡†æ¶ä¹‹åï¼š</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> p = Person.get(<span class="number">10</span>);</span><br><span class="line"><span class="keyword">let</span> name = p.first_name;</span><br></pre></td></tr></table></figure>

<p>é€šè¿‡ä»¥ä¸Šä»£ç å¯¹æ¯”ï¼Œ<code>ORM</code>çš„ä¼˜ç‚¹å°±å‡¸æ˜¾å‡ºæ¥äº†ï¼šä¸šåŠ¡å¼€å‘è€…ä¸éœ€è¦å»ç¢°SQLè¯­å¥ï¼Œåªéœ€è¦ä½¿ç”¨<code>ORM</code>æä¾›çš„æ¥å£ï¼Œç›´æ¥å¯¹å¯¹è±¡è¿›è¡Œæ“ä½œï¼Œå°±å¯ä»¥å®ç°ä¸æ•°æ®åº“çš„äº¤äº’ï¼Œä¸éœ€è¦å…³å¿ƒæ•°æ®åº“åº•å±‚çš„å¢åˆ æ”¹æŸ¥SQLè¯­å¥ã€‚</p>
<h2 id="äºŒã€ORMä¼˜ç¼ºç‚¹"><a href="#äºŒã€ORMä¼˜ç¼ºç‚¹" class="headerlink" title="äºŒã€ORMä¼˜ç¼ºç‚¹"></a>äºŒã€ORMä¼˜ç¼ºç‚¹</h2><p><code>ORM</code>çš„ä¼˜ç‚¹ï¼š</p>
<ul>
<li><p>æ•°æ®æ¨¡å‹éƒ½åœ¨ä¸€ä¸ªåœ°æ–¹å®šä¹‰ï¼Œæ›´å®¹æ˜“æ›´æ–°å’Œç»´æŠ¤ï¼Œä¹Ÿåˆ©äºé‡ç”¨ä»£ç ã€‚</p>
</li>
<li><p><code>ORM</code> æœ‰ç°æˆçš„å·¥å…·ï¼Œå¾ˆå¤šåŠŸèƒ½éƒ½å¯ä»¥è‡ªåŠ¨å®Œæˆï¼Œæ¯”å¦‚æ•°æ®æ¶ˆæ¯’ã€é¢„å¤„ç†ã€äº‹åŠ¡ç­‰ç­‰ã€‚</p>
</li>
<li><p>å®ƒè¿«ä½¿ä½ ä½¿ç”¨ MVC æ¶æ„ï¼Œ<code>ORM</code> å°±æ˜¯å¤©ç„¶çš„ Modelï¼Œæœ€ç»ˆä½¿ä»£ç æ›´æ¸…æ™°ã€‚</p>
</li>
<li><p>åŸºäº <code>ORM</code> çš„ä¸šåŠ¡ä»£ç æ¯”è¾ƒç®€å•ï¼Œä»£ç é‡å°‘ï¼Œè¯­ä¹‰æ€§å¥½ï¼Œå®¹æ˜“ç†è§£ã€‚</p>
</li>
<li><p>ä¸å¿…ç¼–å†™æ€§èƒ½ä¸ä½³çš„ SQLã€‚</p>
</li>
</ul>
<p>ä½†æ˜¯<code>ORM</code>ä¹Ÿæœ‰ç›¸åº”çš„ç¼ºç‚¹ï¼š</p>
<ul>
<li><p><code>ORM</code> åº“ä¸æ˜¯è½»é‡çº§å·¥å…·ï¼Œéœ€è¦èŠ±å¾ˆå¤šç²¾åŠ›å­¦ä¹ å’Œè®¾ç½®ã€‚</p>
</li>
<li><p>å¯¹äºå¤æ‚çš„æŸ¥è¯¢ï¼Œ<code>ORM</code> è¦ä¹ˆæ˜¯æ— æ³•è¡¨è¾¾ï¼Œè¦ä¹ˆæ˜¯æ€§èƒ½ä¸å¦‚åŸç”Ÿçš„ SQLã€‚</p>
</li>
<li><p><code>ORM</code> æŠ½è±¡æ‰äº†æ•°æ®åº“å±‚ï¼Œå¼€å‘è€…æ— æ³•äº†è§£åº•å±‚çš„æ•°æ®åº“æ“ä½œï¼Œä¹Ÿæ— æ³•å®šåˆ¶ä¸€äº›ç‰¹æ®Šçš„ SQLã€‚</p>
</li>
</ul>
<h2 id="ä¸‰ã€ORMæ¡†æ¶"><a href="#ä¸‰ã€ORMæ¡†æ¶" class="headerlink" title="ä¸‰ã€ORMæ¡†æ¶"></a>ä¸‰ã€ORMæ¡†æ¶</h2><p>å®ç”¨<code>ORM</code>æ¡†æ¶ï¼š<a target="_blank" rel="noopener" href="https://sequelize.org/v5/">sequelize</a></p>
<p>è¿æ¥æ•°æ®åº“ï¼š</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> Sequelize = <span class="built_in">require</span>(<span class="string">&#x27;sequelize&#x27;</span>);</span><br><span class="line"><span class="comment">// option1:</span></span><br><span class="line">sequelize = <span class="keyword">new</span> Sequelize(<span class="string">&#x27;database&#x27;</span>, <span class="string">&#x27;username&#x27;</span>, <span class="string">&#x27;password&#x27;</span>, &#123;</span><br><span class="line">    <span class="attr">host</span>: <span class="string">&#x27;localhost&#x27;</span>,</span><br><span class="line">    <span class="attr">dialect</span>: <span class="string">&#x27;mysql&#x27;</span> | <span class="string">&#x27;mariadb&#x27;</span> | <span class="string">&#x27;postgres&#x27;</span> | <span class="string">&#x27;mssql&#x27;</span>,</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// or</span></span><br><span class="line"><span class="comment">// option2:</span></span><br><span class="line"><span class="keyword">const</span> sequelize = <span class="keyword">new</span> Sequelize(<span class="string">&#x27;mysql://root:asd123@localhost:3306/mydb&#x27;</span>);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>ç¤ºä¾‹ä»£ç ï¼š</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;Sequelize, Model, DataTypes, BuildOptions&#125; <span class="keyword">from</span> <span class="string">&#x27;sequelize&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123;</span><br><span class="line">    HasManyGetAssociationsMixin,</span><br><span class="line">    HasManyAddAssociationMixin,</span><br><span class="line">    HasManyHasAssociationMixin,</span><br><span class="line">    Association,</span><br><span class="line">    HasManyCountAssociationsMixin,</span><br><span class="line">    HasManyCreateAssociationMixin</span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">&#x27;sequelize&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¿æ¥æ•°æ®åº“</span></span><br><span class="line"><span class="keyword">const</span> sequelize = <span class="keyword">new</span> Sequelize(<span class="string">&#x27;mysql://root:asd123@localhost:3306/mydb&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// è®¾ç½®ä¸€ä¸ªUserè¡¨çš„æ“ä½œå¯¹è±¡</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">User</span> <span class="keyword">extends</span> <span class="title">Model</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> id!: <span class="built_in">number</span>; <span class="comment">// &#x27;!&#x27;éç©ºæ–­è¨€å¿…é¡»å¾—æœ‰</span></span><br><span class="line">    <span class="keyword">public</span> name!: <span class="built_in">string</span>;</span><br><span class="line">    <span class="keyword">public</span> preferredName!: <span class="built_in">string</span> | <span class="literal">null</span>; <span class="comment">// for nullable fields</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">// timestampsæ—¶é—´æˆ³</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">readonly</span> createdAt!: <span class="built_in">Date</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">readonly</span> updatedAt!: <span class="built_in">Date</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// è®¾ç½®å…³è”è¡¨</span></span><br><span class="line">    <span class="keyword">public</span> getProjects!: HasManyGetAssociationsMixin&lt;Project&gt;; <span class="comment">// Note the null assertions!</span></span><br><span class="line">    <span class="keyword">public</span> addProject!: HasManyAddAssociationMixin&lt;Project, <span class="built_in">number</span>&gt;;</span><br><span class="line">    <span class="keyword">public</span> hasProject!: HasManyHasAssociationMixin&lt;Project, <span class="built_in">number</span>&gt;;</span><br><span class="line">    <span class="keyword">public</span> countProjects!: HasManyCountAssociationsMixin;</span><br><span class="line">    <span class="keyword">public</span> createProject!: HasManyCreateAssociationMixin&lt;Project&gt;;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">readonly</span> projects?: Project[]; <span class="comment">// Note this is optional since it&#x27;s only populated when explicitly requested in code</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> associations: &#123;</span><br><span class="line">        <span class="attr">projects</span>: Association&lt;User, Project&gt;;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è®¾ç½®Projectè¡¨</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Project</span> <span class="keyword">extends</span> <span class="title">Model</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> id!: <span class="built_in">number</span>;</span><br><span class="line">    <span class="keyword">public</span> ownerId!: <span class="built_in">number</span>;</span><br><span class="line">    <span class="keyword">public</span> name!: <span class="built_in">string</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">readonly</span> createdAt!: <span class="built_in">Date</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">readonly</span> updatedAt!: <span class="built_in">Date</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è®¾ç½®Addressè¡¨</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Address</span> <span class="keyword">extends</span> <span class="title">Model</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> userId!: <span class="built_in">number</span>;</span><br><span class="line">    <span class="keyword">public</span> address!: <span class="built_in">string</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">readonly</span> createdAt!: <span class="built_in">Date</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">readonly</span> updatedAt!: <span class="built_in">Date</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆå§‹åŒ–Projectè¡¨</span></span><br><span class="line">Project.init(&#123;</span><br><span class="line">    <span class="attr">id</span>: &#123;</span><br><span class="line">        <span class="attr">type</span>: DataTypes.INTEGER.UNSIGNED, <span class="comment">// you can omit the `new` but this is discouraged</span></span><br><span class="line">        <span class="attr">autoIncrement</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="attr">primaryKey</span>: <span class="literal">true</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">ownerId</span>: &#123;</span><br><span class="line">        <span class="attr">type</span>: DataTypes.INTEGER.UNSIGNED,</span><br><span class="line">        <span class="attr">allowNull</span>: <span class="literal">false</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">name</span>: &#123;</span><br><span class="line">        <span class="attr">type</span>: <span class="keyword">new</span> DataTypes.STRING(<span class="number">128</span>),</span><br><span class="line">        <span class="attr">allowNull</span>: <span class="literal">false</span>,</span><br><span class="line">    &#125;</span><br><span class="line">&#125;, &#123;</span><br><span class="line">    sequelize,</span><br><span class="line">    <span class="attr">tableName</span>: <span class="string">&#x27;projects&#x27;</span>,</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆå§‹åŒ–Userè¡¨</span></span><br><span class="line">User.init(&#123;</span><br><span class="line">    <span class="attr">id</span>: &#123;</span><br><span class="line">        <span class="attr">type</span>: DataTypes.INTEGER.UNSIGNED,</span><br><span class="line">        <span class="attr">autoIncrement</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="attr">primaryKey</span>: <span class="literal">true</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">name</span>: &#123;</span><br><span class="line">        <span class="attr">type</span>: <span class="keyword">new</span> DataTypes.STRING(<span class="number">128</span>),</span><br><span class="line">        <span class="attr">allowNull</span>: <span class="literal">false</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">preferredName</span>: &#123;</span><br><span class="line">        <span class="attr">type</span>: <span class="keyword">new</span> DataTypes.STRING(<span class="number">128</span>),</span><br><span class="line">        <span class="attr">allowNull</span>: <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;, &#123;</span><br><span class="line">    <span class="attr">tableName</span>: <span class="string">&#x27;users&#x27;</span>,</span><br><span class="line">    <span class="attr">sequelize</span>: sequelize,</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆå§‹åŒ–Addressè¡¨</span></span><br><span class="line">Address.init(&#123;</span><br><span class="line">    <span class="attr">userId</span>: &#123;</span><br><span class="line">        <span class="attr">type</span>: DataTypes.INTEGER.UNSIGNED,</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">address</span>: &#123;</span><br><span class="line">        <span class="attr">type</span>: <span class="keyword">new</span> DataTypes.STRING(<span class="number">128</span>),</span><br><span class="line">        <span class="attr">allowNull</span>: <span class="literal">false</span>,</span><br><span class="line">    &#125;</span><br><span class="line">&#125;, &#123;</span><br><span class="line">    <span class="attr">tableName</span>: <span class="string">&#x27;address&#x27;</span>,</span><br><span class="line">    <span class="attr">sequelize</span>: sequelize, <span class="comment">// this bit is important</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¸ºProjectè¡¨è®¾ç½®ä¸€ä¸ªå¤–é”®ownerIdç»‘å®šçº¦æŸåˆ°Userè¡¨ä¸­</span></span><br><span class="line">User.hasMany(Project, &#123;</span><br><span class="line">    <span class="attr">sourceKey</span>: <span class="string">&#x27;id&#x27;</span>,</span><br><span class="line">    <span class="attr">foreignKey</span>: <span class="string">&#x27;ownerId&#x27;</span>,</span><br><span class="line">    <span class="attr">as</span>: <span class="string">&#x27;projects&#x27;</span> <span class="comment">// this determines the name in `associations`!</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// è®¾ç½®Addressè¡¨çš„å¤–é”®çº¦æŸç»‘å®šåˆ°Userè¡¨çš„id</span></span><br><span class="line">Address.belongsTo(User, &#123;<span class="attr">targetKey</span>: <span class="string">&#x27;id&#x27;</span>&#125;);</span><br><span class="line">User.hasOne(Address, &#123;<span class="attr">sourceKey</span>: <span class="string">&#x27;id&#x27;</span>&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// æµ‹è¯•</span></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">stuff</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> newUser = <span class="keyword">await</span> User.create(&#123;</span><br><span class="line">        <span class="attr">name</span>: <span class="string">&#x27;Johnny&#x27;</span>,</span><br><span class="line">        <span class="attr">preferredName</span>: <span class="string">&#x27;John&#x27;</span>,</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="built_in">console</span>.log(newUser.id, newUser.name, newUser.preferredName);</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¿™ä¸ªfirst Projectè®°å½•ç”Ÿæˆæ—¶ä¼šä¸Userçš„idç»‘å®šï¼ŒownerIdå¯¹åº”Userè¡¨é‡Œçš„idè®°å½•ï¼Œè€ŒProjectçš„idä½œä¸ºç´¢å¼•è‡ªå¢</span></span><br><span class="line">    <span class="keyword">const</span> project = <span class="keyword">await</span> newUser.createProject(&#123;</span><br><span class="line">        <span class="attr">name</span>: <span class="string">&#x27;first!&#x27;</span>,</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// findByPk()ï¼Œå…¶ä¸­Pkä¸ºprimary_keyï¼Œå³userè¡¨çš„ç´¢å¼•IDï¼Œå¹¶ä¸”åˆ—å‡ºä¸è¯¥useræœ‰å…³çš„projects</span></span><br><span class="line">    <span class="keyword">const</span> ourUser = <span class="keyword">await</span> User.findByPk(<span class="number">1</span>, &#123;</span><br><span class="line">        <span class="attr">include</span>: [User.associations.projects],</span><br><span class="line">        <span class="attr">rejectOnEmpty</span>: <span class="literal">true</span>, <span class="comment">// Specifying true here removes `null` from the return type!</span></span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="built_in">console</span>.log(ourUser.projects![<span class="number">0</span>].name);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>














</p>
      <div class="post-button"><a class="btn" href="/2021/05/03/orm/" rel="noopener"><i class="fa fa-angle-double-right fa-fw"></i>Read More</a></div>
    </div>
  </div>
  <div class="lx-entry padding">
    <div>
      <h2 class="title"><a href="/2021/05/01/ts-notes/">tséšç¬”</a></h2>
      <span class="lx-post-detail"><i class="fa fa-calendar-o"></i> 2021-05-01</span>
      <p><pre><code>è¯¥ç¬”è®°ä¸»è¦è®°å½•äº†ä¸€äº›ç¼–ç è¿‡ç¨‹ä¸­æ¯”è¾ƒå¸¸è§ä½†æ˜¯åˆå®¹æ˜“æ¨¡ç³Šçš„çŸ¥è¯†ç‚¹
</code></pre>
<p><strong>åŸå§‹ç±»å‹</strong>ï¼š<code>string</code>, <code>boolean</code>, <code>number</code>, <code>null</code>, <code>void</code>, <code>symbol</code>, <code>undefined</code>, <code>bigint</code></p>
<p>Tip: ç¼–ç è¿‡ç¨‹ä¸­ä¹Ÿæœ‰ç±»ä¼¼çš„å…³é”®å­—<code>Boolean</code>, <code>Number</code>, <code>String</code>ç­‰ï¼Œè¿™æ˜¯JSçš„æ„é€ å‡½æ•°ï¼Œå’Œç±»å‹å®Œå…¨ä¸åŒã€‚</p>
<p><strong>Bigint</strong></p>
<p>ä½¿ç”¨Bigintå¯ä»¥å®‰å…¨åœ°å­˜å‚¨å’Œæ“ä½œå¤§æ•´æ•°ï¼Œå³è¿™ä¸ªæ•°å·²ç»è¶…è¿‡äº†JSæ„é€ å‡½æ•°<code>Number</code>èƒ½å¤Ÿè¡¨ç¤ºçš„å®‰å…¨æ•´æ•°èŒƒå›´ï¼Œä½¿ç”¨<code>Bigint</code>éœ€è¦ä½¿ç”¨<code>ESnext</code>ç¼–è¯‘è¾…åŠ©åº“ã€‚</p>
<p>ä¸‹é¢ä¸¤æ®µä»£ç å°±å¯ä»¥çœ‹å‡ºåŒºåˆ«ï¼š</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> max = <span class="built_in">Number</span>.MAX_SAFE_INTEGER; <span class="comment">// 2^53-1</span></span><br><span class="line"><span class="keyword">const</span> max1 = max + <span class="number">1</span>;</span><br><span class="line"><span class="keyword">const</span> max2 = max + <span class="number">2</span>;</span><br><span class="line"><span class="built_in">console</span>.log(max1 === max2); <span class="comment">// true</span></span><br></pre></td></tr></table></figure>

<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> max = <span class="built_in">BigInt</span>(<span class="built_in">Number</span>.MAX_SAFE_INTEGER); <span class="comment">// 2^53-1</span></span><br><span class="line"><span class="keyword">const</span> max1 = max + <span class="number">1n</span>;</span><br><span class="line"><span class="keyword">const</span> max2 = max + <span class="number">2n</span>;</span><br><span class="line"><span class="built_in">console</span>.log(max1 === max2); <span class="comment">// false</span></span><br></pre></td></tr></table></figure>





<p><strong>unknownå’Œany</strong></p>
<p><code>unknown</code>æ˜¯æ›´å®‰å…¨çš„<code>any</code>ç±»å‹ï¼Œ<code>any</code>ç±»å‹åœ¨èµ‹å€¼ä¹‹å‰ï¼Œå¯ä»¥é€šè¿‡.å»è·å–å±æ€§å’Œæ–¹æ³•ä¸ä¼šæŠ›é”™ï¼Œä½†æ˜¯<code>unknown</code>ä¼šã€‚</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> value: <span class="built_in">any</span>;</span><br><span class="line">value.foo.bar; <span class="comment">// ok</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> zoo: unknown;</span><br><span class="line">zoo.foo; <span class="comment">// error</span></span><br></pre></td></tr></table></figure>









<p><strong>å…ƒç»„</strong></p>
<p>å…ƒç»„ä¸æ•°ç»„éå¸¸ç›¸ä¼¼ï¼Œå…ƒç»„å¯ä»¥è¯´æ˜¯ç±»å‹æ›´åŠ ä¸¥æ ¼çš„æ•°ç»„ã€‚</p>
<p>å…ƒç»„å®šä¹‰å®Œåå¯ä»¥é€šè¿‡<code>push</code>æ·»åŠ å…ƒç´ ï¼Œä½†æ˜¯è·å–æ—¶ä¼šæŠ¥é”™</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> x: [<span class="built_in">string</span>, <span class="built_in">number</span>];</span><br><span class="line">x = [<span class="string">&quot;robin&quot;</span>, <span class="number">10</span>]; <span class="comment">// ok</span></span><br><span class="line">x = [<span class="number">10</span>]; <span class="comment">// error</span></span><br><span class="line"></span><br><span class="line">x.push(<span class="number">2</span>);</span><br><span class="line">x[<span class="number">2</span>]; <span class="comment">// error</span></span><br></pre></td></tr></table></figure>







<p><strong>æšä¸¾çš„æœ¬è´¨</strong></p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">enum</span> Direction&#123;</span><br><span class="line">		up,</span><br><span class="line">		left,</span><br><span class="line">		down,</span><br><span class="line">		right</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(Direction.up) <span class="comment">// 0</span></span><br><span class="line"><span class="built_in">console</span>.log(Direction[<span class="number">0</span>]) <span class="comment">// up</span></span><br></pre></td></tr></table></figure>

<p>ä»ä¸Šè¿°ä¾‹å­ä¸­å¯ä»¥çœ‹å‡ºæšä¸¾ä¸­å®ç°äº†æ­£åå‘åŒæ—¶æ˜ å°„ï¼Œå¹³å¸¸çš„ä¾‹å­ä¸­ï¼Œä¸€èˆ¬éƒ½æ˜¯æ­£å‘æ˜ å°„ï¼Œæ¯”å¦‚ä¸€ä¸ªå¯¹è±¡ï¼Œ<code>key =&gt; value</code>ï¼›</p>
<p>ç›´æ¥çœ‹çœ‹æšä¸¾ç¼–è¯‘åçš„JSä»£ç ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> Direction;</span><br><span class="line">(<span class="function"><span class="keyword">function</span> (<span class="params">Direction</span>) </span>&#123;</span><br><span class="line">		Direction[Direction[<span class="string">&#x27;up&#x27;</span>] = <span class="number">0</span>] = <span class="string">&#x27;up&#x27;</span>;</span><br><span class="line">  	<span class="comment">// ...</span></span><br><span class="line">&#125;) (Direction || (Direction = &#123;&#125;));</span><br></pre></td></tr></table></figure>





<p><strong>å®ç°ä¸€ä¸ªå®Œå–„çš„pickå‡½æ•°ï¼Œç”¨äºè·å–å¯¹è±¡ä¸­çš„value</strong></p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> KVObject &#123;</span><br><span class="line">    [key: <span class="built_in">string</span>]: <span class="built_in">any</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">pick</span>&lt;<span class="title">T</span>, <span class="title">K</span> <span class="title">extends</span> <span class="title">keyof</span> <span class="title">T</span>&gt;(<span class="params">o: T, names: <span class="built_in">Array</span>&lt;K&gt;</span>): <span class="title">Array</span>&lt;<span class="title">T</span>[<span class="title">K</span>]&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> names.map(<span class="function">(<span class="params">n: K</span>)=&gt;</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> o[n];</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> obj: KVObject = &#123;</span><br><span class="line">    <span class="attr">username</span>: <span class="string">&#x27;robin&#x27;</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="number">25</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(pick(obj, [<span class="string">&quot;username&quot;</span>, <span class="string">&#x27;age&#x27;</span>]));</span><br></pre></td></tr></table></figure>



<p><strong>æŠŠæ¥å£ä¸­çš„æˆå‘˜å˜æˆå¯é€‰ï¼Œè¿™ä¸ªåœºæ™¯åä»½å¸¸è§ï¼Œæˆ‘ä»¬åœ¨å£°æ˜ä¸€ä¸ªæ¥å£åï¼Œå¸¸å¸¸åœ¨å£°æ˜å˜é‡çš„æ—¶å€™å»åˆ©ç”¨è¿™ä¸ªæ¥å£ï¼Œä½†æ˜¯åœ¨å£°æ˜å˜é‡æ—¶ï¼Œå˜é‡å†…çš„å±æ€§æˆ–è€…æ–¹æ³•ä¸€æ—¶åŠä¼šåˆç»™ä¸åˆ°ï¼Œè¿™æ—¶å€™åˆ©ç”¨ä»¥ä¸‹è¿™ä¸ªæ–¹æ³•å°±å¯ä»¥æœ‰æ•ˆå…¼å®¹</strong></p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> User &#123;</span><br><span class="line">    <span class="attr">username</span>: <span class="built_in">string</span>;</span><br><span class="line">    id: <span class="built_in">number</span>;</span><br><span class="line">    token: <span class="built_in">string</span>;</span><br><span class="line">    avatar: <span class="built_in">string</span>;</span><br><span class="line">    role: <span class="built_in">string</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> partial&lt;T&gt; = &#123; [K <span class="keyword">in</span> keyof T]? : T[K] &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> user: partial&lt;User&gt; = &#123;</span><br><span class="line">    <span class="attr">id</span>: <span class="number">1</span>,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>





<p><strong>ç±»å‹ç¼–ç¨‹ï¼šç¼–å†™ä¸€ä¸ªå·¥å…·ç±»å‹å°†<code>interface</code>ä¸­å‡½æ•°ç±»å‹çš„åç§°å–å‡ºæ¥</strong></p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> Part &#123;</span><br><span class="line">    <span class="attr">id</span>: <span class="built_in">number</span>;</span><br><span class="line">    name: <span class="built_in">string</span>;</span><br><span class="line">    subParts: Part[];</span><br><span class="line">    updatePart(newName: <span class="built_in">string</span>): <span class="built_in">void</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> FunctionPropName&lt;T&gt; = &#123;[K <span class="keyword">in</span> keyof T]: T[K] <span class="keyword">extends</span> <span class="built_in">Function</span> ? K: <span class="built_in">never</span>&#125;[keyof T];</span><br><span class="line"><span class="keyword">type</span> funcName = FunctionPropName&lt;Part&gt;; <span class="comment">// type funcName = &#x27;updatePart&#x27;</span></span><br></pre></td></tr></table></figure>





<p><strong>ç±»å‹ç¼–ç¨‹ï¼šå–å‡ºä¸‹é¢<code>interface</code>ä¸­çš„å¯é€‰ç±»å‹ï¼ˆåˆ©ç”¨ç©ºå¯¹è±¡è¿›è¡Œæ‰©å±•ç”„åˆ«ï¼Œç½‘ä¸Šçœ‹åˆ°çš„ä¸€ç§æ–¹æ³•ï¼Œå¾ˆå·§å¦™ï¼‰</strong></p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> People &#123;</span><br><span class="line">    <span class="keyword">readonly</span> n: <span class="built_in">number</span>;</span><br><span class="line">    id: <span class="built_in">string</span>;</span><br><span class="line">    name: <span class="built_in">string</span>;</span><br><span class="line">    age?: <span class="built_in">number</span>;</span><br><span class="line">    <span class="keyword">from</span>?: <span class="built_in">string</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> OptionalKeys&lt;T&gt; = &#123;[K <span class="keyword">in</span> keyof T]-?: (&#123;&#125; <span class="keyword">extends</span> &#123;[P <span class="keyword">in</span> K]: T[P]&#125; ? K : <span class="built_in">never</span>)&#125;[keyof T];</span><br><span class="line"><span class="keyword">type</span> r = OptionalKeys&lt;People&gt;; <span class="comment">// &#x27;age&#x27;|&#x27;from&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// å¿…é¡»å±æ€§</span></span><br><span class="line"><span class="keyword">type</span> RequiredKeys&lt;T&gt; = &#123;[K <span class="keyword">in</span> keyof T]-?: (&#123;&#125; <span class="keyword">extends</span> &#123;[P <span class="keyword">in</span> K]: T[P]&#125; ? <span class="built_in">never</span> : K)&#125;[keyof T];</span><br></pre></td></tr></table></figure>
</p>
      <div class="post-button"><a class="btn" href="/2021/05/01/ts-notes/" rel="noopener"><i class="fa fa-angle-double-right fa-fw"></i>Read More</a></div>
    </div>
  </div>




<footer>
  <div>
  Copyright &copy; 2021.<a href="/">ROBIN-3910</a><br>Powered by <a href="https://hexo.io" target="_blank">Hexo</a> | Theme <a href="https://lx.js.org" target="_blank">Lx</a><br>
  </div>
</footer>

  </div>
</div>
</div>

<button class="hamburger hamburger--arrow-r" type="button">
    <div class="hamburger-box">
      <div class="hamburger-inner"></div>
    </div>
</button> 
<div class="menu visibility">
  <div class="menu-head">
    <span class="layer">
      <div class="col">
        <div class="row for-pic">
          <div class="profile-pic">
            <a href="/"><img src="/images/avatar.jpeg" alt="rob_æ›¾æ´›é•”"/></a>
          </div>
        </div>
        <div class="row for-name">
          <p>rob_æ›¾æ´›é•”</p>
          <span class="tagline">ç¥ä½ æš´å¯ŒğŸ¤©</span>
        </div>
      </div>
    </span>
  </div>
  <nav class="menu-container">
  <ul class="menu-items">
    <li><a href="/"><i class="fa fa-home fa-fw"></i>Home</a></li>
    <li><a href="/archives/"><i class="fa fa-archive fa-fw"></i>Archives</a></li>
    
    
    
  </ul>
  </nav>
</div>

<div class="gototop js-top">
  <a href="#" class="js-gotop"><i class="fa fa-arrow-up"></i></a>
</div>
<script src="//cdn.jsdelivr.net/npm/theme-lx@0.3.9/source/js/jquery.easing.min.js"></script>
<script>
(function () {
	"use strict";
	var goToTop = function() {
		$(".js-gotop").on("click", function(event){
			event.preventDefault();
			$("html, body").animate({
				scrollTop: $("html").offset().top
			}, 500, "easeInOutExpo");
			return false;
		});
		$(window).scroll(function(){
			var $win = $(window);
			if ($win.scrollTop() > 200) {
				$(".js-top").addClass("active");
			} else {
				$(".js-top").removeClass("active");
			}
		});
	};
	$(function(){
		goToTop();
	});
}());
</script>


</body>
</html>
